{"ast":null,"code":"import _objectSpread from\"/Users/sun/Desktop/vscode-macR/robe-non1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef,useMemo}from'react';import{initializeApp}from'firebase/app';import{getAuth,signInAnonymously,onAuthStateChanged}from'firebase/auth';import{getFirestore,doc,collection,onSnapshot,addDoc,updateDoc,query,deleteDoc,setDoc}from'firebase/firestore';// Lucide React for icons\nimport{ClipboardList,UserRound,ArrowUp,MessageSquare,Plus,ChevronLeft,ChevronRight,Trash2,Copy,Phone,Undo2,History,AlertTriangle,Edit,Lock,Search,ChevronDown,Settings,X}from'lucide-react';// --- Firebase Configuration & Initialization ---\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const firebaseConfig={apiKey:\"AIzaSyDIC0be4A6AK3lDjH5ouh_oywGvTKRxMt4\",authDomain:\"robe-non1.firebaseapp.com\",projectId:\"robe-non1\",storageBucket:\"robe-non1.firebasestorage.app\",messagingSenderId:\"491977372291\",appId:\"1:491977372291:web:8abd59846cc674689a61b6\"};const appId=firebaseConfig.appId;// --- Main App Component ---\nfunction Dashboard(_ref){var _selectedRecord$date,_selectedRecord$comme,_selectedRecord$comme2,_selectedRecord$comme3,_selectedRecord$comme4;let{user}=_ref;const[db,setDb]=useState(null);const[records,setRecords]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const topOfPageRef=useRef(null);const formRef=useRef(null);const[newRecordForm,setNewRecordForm]=useState({customerName:'',customerContact:'',salesperson:'',branch:'신사',source:'워크인',reason:'가격 문제',reservationDate:'',reservationTime:'',consultationTime:'',recordContent:''});const[showCommentModal,setShowCommentModal]=useState(false);const[selectedRecord,setSelectedRecord]=useState(null);const[newCommentText,setNewCommentText]=useState('');const[showConfirmDeleteModal,setShowConfirmDeleteModal]=useState(false);const[deleteRecordId,setDeleteRecordId]=useState(null);const[showRecontractModal,setShowRecontractModal]=useState(false);const[recontractRecord,setRecontractRecord]=useState(null);const[recontractForm,setRecontractForm]=useState({salesperson:'',content:''});const[showHistory,setShowHistory]=useState(false);const[showRevertConfirmModal,setShowRevertConfirmModal]=useState(false);const[recordToRevert,setRecordToRevert]=useState(null);const[unclosedPage,setUnclosedPage]=useState(1);const[recontactedPage,setRecontactedPage]=useState(1);const[recontractedCompletedPage,setRecontractedCompletedPage]=useState(1);const recordsPerPage=5;const[statsMonth,setStatsMonth]=useState(new Date());const[searchTerm,setSearchTerm]=useState('');const[sortBy,setSortBy]=useState('date-desc');const[reasonFilter,setReasonFilter]=useState('all');const[sourceFilter,setSourceFilter]=useState('all');const[showSettingsModal,setShowSettingsModal]=useState(false);const[editingList,setEditingList]=useState({name:'',title:'',items:[]});const[newItemText,setNewItemText]=useState('');const[sources,setSources]=useState(['워크인','박람회','루어','지인소개','크라우드','기타']);const[reasons,setReasons]=useState(['가격 문제','비교 방문','고객 변심','의견 불일치','기타','노쇼']);const branches=['신사','광교','구월','노원','대전','부산','성수','수원','압구정','인천','잠실'];const branchColors={'신사':'#EF4444','광교':'#F97316','구월':'#F59E0B','노원':'#10B981','대전':'#6B7280','부산':'#3B82F6','성수':'#A855F7','수원':'#EC4899','압구정':'#14B8A6','인천':'#6366F1','잠실':'#84CC16','기타':'#78716C'};const reasonColors={'가격 문제':'#EF4444','비교 방문':'#F97316','고객 변심':'#F59E0B','의견 불일치':'#6366F1','기타':'#6B7280','노쇼':'#A855F7'};useEffect(()=>{const app=initializeApp(firebaseConfig);const firestoreDb=getFirestore(app);setDb(firestoreDb);},[]);useEffect(()=>{if(!db)return;const settingsCollectionPath=\"artifacts/\".concat(appId,\"/public/data/dashboard_settings\");const unsubSources=onSnapshot(doc(db,settingsCollectionPath,'sources'),doc=>{if(doc.exists()&&doc.data().items)setSources(doc.data().items);});const unsubReasons=onSnapshot(doc(db,settingsCollectionPath,'reasons'),doc=>{if(doc.exists()&&doc.data().items){const fetchedReasons=doc.data().items;if(!fetchedReasons.includes('노쇼')){fetchedReasons.push('노쇼');}setReasons(fetchedReasons);}});return()=>{unsubSources();unsubReasons();};},[db]);useEffect(()=>{if(!db||!user)return;setLoading(true);const collectionPath=\"artifacts/\".concat(appId,\"/public/data/unclosed_records\");const q=query(collection(db,collectionPath));const unsubscribe=onSnapshot(q,snapshot=>{const fetchedRecords=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));setRecords(fetchedRecords);setLoading(false);},err=>{console.error(\"Data Fetch Error:\",err);setError(\"데이터를 불러오는 데 실패했습니다.\");setLoading(false);});return()=>unsubscribe();},[db,user]);const handleFormChange=e=>setNewRecordForm(prev=>_objectSpread(_objectSpread({},prev),{},{[e.target.name]:e.target.value}));const handleRecontractFormChange=e=>setRecontractForm(prev=>_objectSpread(_objectSpread({},prev),{},{[e.target.name]:e.target.value}));const handleAddRecord=async e=>{e.preventDefault();if(!db||!newRecordForm.customerName||!newRecordForm.salesperson||!newRecordForm.recordContent){return setError(\"필수 항목을 모두 입력해주세요.\");}try{var _topOfPageRef$current;await addDoc(collection(db,\"artifacts/\".concat(appId,\"/public/data/unclosed_records\")),_objectSpread(_objectSpread({},newRecordForm),{},{comments:[],date:new Date(),status:'미계약',recontacted:false}));setNewRecordForm({customerName:'',customerContact:'',salesperson:'',branch:'신사',source:sources[0]||'',reason:reasons[0]||'',reservationDate:'',reservationTime:'',consultationTime:'',recordContent:''});setError(null);(_topOfPageRef$current=topOfPageRef.current)===null||_topOfPageRef$current===void 0?void 0:_topOfPageRef$current.scrollIntoView({behavior:'smooth'});}catch(e){setError(\"데이터 추가 중 오류가 발생했습니다.\");}};const openSettingsModal=(listName,title,items)=>{setEditingList({name:listName,title:title,items:items});setNewItemText('');setShowSettingsModal(true);};const handleUpdateList=async(listName,updatedItems)=>{if(!db)return;const docRef=doc(db,\"artifacts/\".concat(appId,\"/public/data/dashboard_settings\"),listName);try{await setDoc(docRef,{items:updatedItems});}catch(e){setError(\"\".concat(editingList.title,\" \\uBAA9\\uB85D \\uC5C5\\uB370\\uC774\\uD2B8 \\uC911 \\uC624\\uB958 \\uBC1C\\uC0DD\"));}};const handleAddItemToList=()=>{if(newItemText.trim()===''||editingList.items.includes(newItemText.trim()))return;const updatedItems=[...editingList.items,newItemText.trim()];setEditingList(prev=>_objectSpread(_objectSpread({},prev),{},{items:updatedItems}));handleUpdateList(editingList.name,updatedItems);setNewItemText('');};const handleDeleteItemFromList=itemToDelete=>{if(itemToDelete==='노쇼')return;// Prevent deleting '노쇼'\nconst updatedItems=editingList.items.filter(item=>item!==itemToDelete);setEditingList(prev=>_objectSpread(_objectSpread({},prev),{},{items:updatedItems}));handleUpdateList(editingList.name,updatedItems);};const openRevertConfirmModal=record=>{setRecordToRevert(record);setShowRevertConfirmModal(true);};const handleRevertToUnclosed=async()=>{if(!db||!recordToRevert)return;try{const originalComments=recordToRevert.comments.filter(c=>{const type=typeof c==='object'?c.type:'original';return type==='original';});await updateDoc(doc(db,\"artifacts/\".concat(appId,\"/public/data/unclosed_records\"),recordToRevert.id),{status:'미계약',comments:originalComments});setShowRevertConfirmModal(false);setRecordToRevert(null);}catch(e){setError(\"미계약으로 되돌리는 중 오류가 발생했습니다.\");}};const openRecontractModal=record=>{setRecontractRecord(record);setRecontractForm({salesperson:'',content:''});setShowRecontractModal(true);};const handleConfirmRecontract=async e=>{e.preventDefault();if(!db||!recontractRecord||!recontractForm.salesperson||!recontractForm.content){return setError(\"재계약 담당자와 과정 기록을 모두 입력해주세요.\");}try{const recontractNote={text:\"[\\uC7AC\\uACC4\\uC57D \\uC131\\uACF5] \\uB2F4\\uB2F9\\uC790: \".concat(recontractForm.salesperson,\"\\n\\uACFC\\uC815: \").concat(recontractForm.content),type:'recontract-process',timestamp:new Date()};const updatedComments=[...(recontractRecord.comments||[]),recontractNote];await updateDoc(doc(db,\"artifacts/\".concat(appId,\"/public/data/unclosed_records\"),recontractRecord.id),{status:'recontracted',comments:updatedComments});setShowRecontractModal(false);setRecontractRecord(null);setError(null);}catch(e){setError(\"재계약 처리 중 오류가 발생했습니다.\");}};const handleAddComment=async()=>{if(!db||!(selectedRecord!==null&&selectedRecord!==void 0&&selectedRecord.id)||!newCommentText)return;try{const newCommentObject={text:newCommentText,type:selectedRecord.status==='recontracted'?'follow-up':'original',timestamp:new Date()};const updatedComments=[...(selectedRecord.comments||[]),newCommentObject];await updateDoc(doc(db,\"artifacts/\".concat(appId,\"/public/data/unclosed_records\"),selectedRecord.id),{comments:updatedComments});setNewCommentText('');setSelectedRecord(prev=>_objectSpread(_objectSpread({},prev),{},{comments:updatedComments}));}catch(e){setError(\"코멘트 추가 중 오류가 발생했습니다.\");}};const handleDeleteComment=async(commentIndexToDelete,commentType)=>{if(!db||!(selectedRecord!==null&&selectedRecord!==void 0&&selectedRecord.id))return;try{const commentsOfType=selectedRecord.comments.filter(c=>typeof c==='object'?c.type===commentType:commentType==='original'&&!c.startsWith('[재계약 성공]'));const otherComments=selectedRecord.comments.filter(c=>typeof c==='object'?c.type!==commentType:commentType==='original'&&c.startsWith('[재계약 성공]'));const updatedCommentsOfType=commentsOfType.filter((_,index)=>index!==commentIndexToDelete);const finalComments=[...otherComments,...updatedCommentsOfType];await updateDoc(doc(db,\"artifacts/\".concat(appId,\"/public/data/unclosed_records\"),selectedRecord.id),{comments:finalComments});setSelectedRecord(prev=>_objectSpread(_objectSpread({},prev),{},{comments:finalComments}));}catch(e){setError(\"코멘트 삭제 중 오류가 발생했습니다.\");}};const handleDeleteRecord=async()=>{if(!db||!deleteRecordId)return;try{await deleteDoc(doc(db,\"artifacts/\".concat(appId,\"/public/data/unclosed_records\"),deleteRecordId));setDeleteRecordId(null);setShowConfirmDeleteModal(false);}catch(e){setError(\"데이터 삭제 중 오류가 발생했습니다.\");}};const toggleRecontact=async(recordId,currentStatus)=>{if(!db)return;try{await updateDoc(doc(db,\"artifacts/\".concat(appId,\"/public/data/unclosed_records\"),recordId),{recontacted:!currentStatus});}catch(e){setError(\"리컨택 상태 업데이트 중 오류가 발생했습니다.\");}};const openCommentModal=record=>{setShowHistory(false);setSelectedRecord(record);setShowCommentModal(true);};const openConfirmDeleteModal=recordId=>{setDeleteRecordId(recordId);setShowConfirmDeleteModal(true);};const handleCopyRecord=()=>{if(!selectedRecord)return;let copyText=\"[\\uAE30\\uBCF8 \\uC815\\uBCF4]\\n\\uC9C0\\uC810: \".concat(selectedRecord.branch,\"\\n\\uCD5C\\uCD08 \\uB2F4\\uB2F9\\uC790: \").concat(selectedRecord.salesperson,\"\\n\\uACE0\\uAC1D: \").concat(selectedRecord.customerName,\" (\").concat(selectedRecord.customerContact||'없음',\")\\n\\uCD9C\\uCC98: \").concat(selectedRecord.source,\"\\n\\uCD5C\\uCD08 \\uBBF8\\uACC4\\uC57D \\uC0AC\\uC720: \").concat(selectedRecord.reason);if(selectedRecord.status==='recontracted'){const{process}=parseRecontractInfo(selectedRecord);if(process)copyText+=\"\\n\\n[\\uC7AC\\uACC4\\uC57D \\uACFC\\uC815 \\uAE30\\uB85D]\\n\".concat(process);}else{copyText+=\"\\n\\n[\\uBBF8\\uACC4\\uC57D \\uAE30\\uB85D]\\n\".concat(selectedRecord.recordContent);}const textarea=document.createElement('textarea');textarea.value=copyText;document.body.appendChild(textarea);textarea.select();try{document.execCommand('copy');alert('기록 내용이 클립보드에 복사되었습니다.');}catch(err){alert('복사에 실패했습니다.');}document.body.removeChild(textarea);};const parseRecontractInfo=record=>{var _record$comments,_lines$;const recontractComment=(_record$comments=record.comments)===null||_record$comments===void 0?void 0:_record$comments.find(c=>typeof c==='object'&&c.type==='recontract-process'||typeof c==='string'&&c.startsWith('[재계약 성공]'));if(!recontractComment)return{recontractor:'N/A',process:''};const text=typeof recontractComment==='string'?recontractComment:recontractComment.text;const lines=text.split('\\n');const recontractor=((_lines$=lines[0])===null||_lines$===void 0?void 0:_lines$.replace('[재계약 성공] 담당자: ','').trim())||'N/A';const process=lines.slice(1).join('\\n').replace('과정: ','').trim();return{recontractor,process};};const getCommentCount=record=>{if(!record||!record.comments)return 0;return record.comments.filter(c=>typeof c==='object'?c.type!=='recontract-process':!c.startsWith('[재계약 성공]')).length;};const filteredAndSortedRecords=useMemo(()=>{let processedRecords=[...records];if(sourceFilter!=='all'){processedRecords=processedRecords.filter(r=>r.source===sourceFilter);}if(reasonFilter!=='all'){processedRecords=processedRecords.filter(r=>r.reason===reasonFilter);}if(searchTerm){processedRecords=processedRecords.filter(record=>{var _record$customerName,_record$salesperson;return((_record$customerName=record.customerName)===null||_record$customerName===void 0?void 0:_record$customerName.toLowerCase().includes(searchTerm.toLowerCase()))||((_record$salesperson=record.salesperson)===null||_record$salesperson===void 0?void 0:_record$salesperson.toLowerCase().includes(searchTerm.toLowerCase()));});}processedRecords.sort((a,b)=>{var _a$date,_b$date;const dateA=((_a$date=a.date)===null||_a$date===void 0?void 0:_a$date.toDate())||0;const dateB=((_b$date=b.date)===null||_b$date===void 0?void 0:_b$date.toDate())||0;if(sortBy==='date-asc'){return dateA-dateB;}return dateB-dateA;});return processedRecords;},[records,searchTerm,sortBy,reasonFilter,sourceFilter]);const allUnclosedRecords=filteredAndSortedRecords.filter(r=>r.status!=='recontracted'&&!r.recontacted);const recontactedOnlyRecords=filteredAndSortedRecords.filter(r=>r.status!=='recontracted'&&r.recontacted);const recontractedCompletedRecords=filteredAndSortedRecords.filter(r=>r.status==='recontracted');const dashboardData=useMemo(()=>{const now=new Date();const allUnclosedRecords=records.filter(r=>r.status!=='recontracted');const activeUnclosed=allUnclosedRecords.filter(r=>r.reason!=='노쇼');const data={monthlyData:{},salespersonBranchMap:{}};activeUnclosed.forEach(r=>{var _r$date,_data$monthlyData$mKe;const d=(_r$date=r.date)===null||_r$date===void 0?void 0:_r$date.toDate();if(!d)return;const mKey=\"\".concat(d.getFullYear(),\"-\").concat(String(d.getMonth()+1).padStart(2,'0'));data.monthlyData[mKey]={total:(((_data$monthlyData$mKe=data.monthlyData[mKey])===null||_data$monthlyData$mKe===void 0?void 0:_data$monthlyData$mKe.total)||0)+1};if(r.salesperson&&r.branch)data.salespersonBranchMap[r.salesperson]=r.branch;});const statsMonthRecords=allUnclosedRecords.filter(r=>{var _r$date2;const d=(_r$date2=r.date)===null||_r$date2===void 0?void 0:_r$date2.toDate();return d&&d.getFullYear()===statsMonth.getFullYear()&&d.getMonth()===statsMonth.getMonth();});const monthlySalespersons={};const monthlyBranches={};const monthlySources={};const monthlyReasons={};const monthlyNoShowsByBranch={};statsMonthRecords.forEach(r=>{if(r.reason!=='노쇼'){monthlySalespersons[r.salesperson]=(monthlySalespersons[r.salesperson]||0)+1;monthlyBranches[r.branch]=(monthlyBranches[r.branch]||0)+1;monthlySources[r.source]=(monthlySources[r.source]||0)+1;monthlyReasons[r.reason]=(monthlyReasons[r.reason]||0)+1;}if(r.reason==='노쇼'){monthlyNoShowsByBranch[r.branch]=(monthlyNoShowsByBranch[r.branch]||0)+1;}});const currentMonthRecordsCount=activeUnclosed.filter(r=>{var _r$date3;const d=(_r$date3=r.date)===null||_r$date3===void 0?void 0:_r$date3.toDate();return d&&d.getFullYear()===now.getFullYear()&&d.getMonth()===now.getMonth();}).length;const lastMonthStart=new Date(now.getFullYear(),now.getMonth()-1,1);const lastMonthEnd=new Date(now.getFullYear(),now.getMonth(),0,23,59,59,999);const lastMonthRecordsCount=activeUnclosed.filter(r=>{var _r$date4;const d=(_r$date4=r.date)===null||_r$date4===void 0?void 0:_r$date4.toDate();return d&&d>=lastMonthStart&&d<=lastMonthEnd;}).length;return _objectSpread(_objectSpread({},data),{},{monthlySalespersons,monthlyBranches,monthlySources,monthlyReasons,monthlyNoShowsByBranch,totalRecordsCurrentMonth:currentMonthRecordsCount,totalRecordsLastMonth:lastMonthRecordsCount});},[records,statsMonth]);const handleInputFocus=e=>{setTimeout(()=>{e.target.scrollIntoView({behavior:'smooth',block:'center'});},300);};const handleKeyDown=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleAddRecord(e);}};const renderChart=(data,ChartComponent)=>{const hasData=Object.keys(data).length>0;return/*#__PURE__*/_jsx(\"div\",{className:\"relative p-4\",children:hasData?/*#__PURE__*/_jsx(ChartComponent,{data:data}):/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500 h-full flex items-center justify-center\",children:\"\\uB370\\uC774\\uD130\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"})});};const MonthlyLineChart=_ref2=>{let{data}=_ref2;const sortedMonths=Object.keys(data).sort().slice(-6);if(sortedMonths.length===0)return/*#__PURE__*/_jsx(\"div\",{className:\"h-40 flex items-center justify-center text-gray-500\",children:\"\\uB370\\uC774\\uD130\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"});const maxCount=Math.max(...sortedMonths.map(m=>data[m].total),0);const chartHeight=160;const chartWidth=500;const padding=30;const points=sortedMonths.map((month,index)=>{const x=index/(sortedMonths.length>1?sortedMonths.length-1:1)*(chartWidth-padding*2)+padding;const y=chartHeight-padding-data[month].total/(maxCount||1)*(chartHeight-padding*2);return\"\".concat(x,\",\").concat(y);}).join(' ');return/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-40\",children:/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 \".concat(chartWidth,\" \").concat(chartHeight),className:\"w-full h-full\",preserveAspectRatio:\"xMidYMid meet\",children:[/*#__PURE__*/_jsx(\"line\",{x1:padding,y1:chartHeight-padding,x2:chartWidth-padding,y2:chartHeight-padding,stroke:\"#e5e7eb\",strokeWidth:\"1\"}),/*#__PURE__*/_jsx(\"polyline\",{fill:\"none\",stroke:\"#EF4444\",strokeWidth:\"2\",points:points}),sortedMonths.map((month,index)=>{const x=index/(sortedMonths.length>1?sortedMonths.length-1:1)*(chartWidth-padding*2)+padding;const y=chartHeight-padding-data[month].total/(maxCount||1)*(chartHeight-padding*2);return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"circle\",{cx:x,cy:y,r:\"4\",fill:\"#EF4444\",stroke:\"white\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"text\",{x:x,y:y-10,textAnchor:\"middle\",fontSize:\"12\",fill:\"#4b5563\",fontWeight:\"bold\",children:data[month].total}),/*#__PURE__*/_jsxs(\"text\",{x:x,y:chartHeight-padding+15,textAnchor:\"middle\",fontSize:\"12\",fill:\"#9ca3af\",children:[month.substring(5),\"\\uC6D4\"]})]},month);})]})});};const TopNChart=_ref3=>{var _sortedData$;let{data,isSalespersonChart=false}=_ref3;const sortedData=Object.entries(data).sort((_ref4,_ref5)=>{let[,a]=_ref4;let[,b]=_ref5;return b-a;});const maxCount=((_sortedData$=sortedData[0])===null||_sortedData$===void 0?void 0:_sortedData$[1])||0;if(sortedData.length===0)return/*#__PURE__*/_jsx(\"div\",{className:\"p-4 w-full text-center text-gray-500\",children:\"\\uD574\\uB2F9 \\uC6D4 \\uB370\\uC774\\uD130\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"});return/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col space-y-2 p-4 w-full\",children:sortedData.map(_ref6=>{let[label,count]=_ref6;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-600 w-24 truncate\",children:label}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-4 bg-gray-200 rounded-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full rounded-full\",style:{width:\"\".concat(count/maxCount*100,\"%\"),backgroundColor:isSalespersonChart?branchColors[dashboardData.salespersonBranchMap[label]]:branchColors[label]}})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:count})]},label);})});};const PieChart=_ref7=>{let{data}=_ref7;const total=Object.values(data).reduce((s,c)=>s+c,0);const sortedData=Object.entries(data).sort((_ref8,_ref9)=>{let[,a]=_ref8;let[,b]=_ref9;return b-a;});const colors=['#EF4444','#F97316','#F59E0B','#10B981','#6B7280','#06B6D4'];let p=0;const paths=sortedData.map((_ref0,i)=>{let[label,count]=_ref0;const percent=count/total*100;const a1=p/100*360;p+=percent;const a2=p/100*360;const[x1,y1]=[18+15.9155*Math.cos(Math.PI*(a1-90)/180),18+15.9155*Math.sin(Math.PI*(a1-90)/180)];const[x2,y2]=[18+15.9155*Math.cos(Math.PI*(a2-90)/180),18+15.9155*Math.sin(Math.PI*(a2-90)/180)];return/*#__PURE__*/_jsx(\"path\",{d:\"M18,18 L\".concat(x1,\",\").concat(y1,\" A15.9155,15.9155 0 \").concat(percent>50?1:0,\",1 \").concat(x2,\",\").concat(y2,\" Z\"),fill:colors[i%colors.length]},label);});return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 36 36\",className:\"w-32 h-32 mb-4\",children:paths}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap justify-center gap-x-4 gap-y-2 text-xs\",children:sortedData.map((_ref1,i)=>{let[l,c]=_ref1;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-3 h-3 rounded-full mr-2\",style:{backgroundColor:colors[i%colors.length]}}),l,\" (\",(c/total*100).toFixed(0),\"%)\"]},l);})})]});};const TopNChartReasons=_ref10=>{var _sortedData$2;let{data}=_ref10;const sortedData=Object.entries(data).sort((_ref11,_ref12)=>{let[,a]=_ref11;let[,b]=_ref12;return b-a;}).slice(0,5);const maxCount=((_sortedData$2=sortedData[0])===null||_sortedData$2===void 0?void 0:_sortedData$2[1])||0;return/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col space-y-2 p-4\",children:sortedData.map(_ref13=>{let[label,count]=_ref13;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm w-24 truncate\",children:label}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-4 bg-gray-200 rounded-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full\",style:{width:\"\".concat(count/maxCount*100,\"%\"),backgroundColor:reasonColors[label]}})}),/*#__PURE__*/_jsx(\"span\",{children:count})]},label);})});};const PaginatedTable=_ref14=>{let{title,records,currentPage,setCurrentPage,columns,renderRow}=_ref14;const totalPages=Math.ceil(records.length/recordsPerPage);const paginatedRecords=records.slice((currentPage-1)*recordsPerPage,currentPage*recordsPerPage);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 sm:p-6 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4 text-gray-700\",children:title}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-[700px] w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsx(\"tr\",{children:columns.map(col=>/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap\",children:col},col))})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:records.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:columns.length,className:\"p-4 text-center text-gray-500\",children:\"\\uD574\\uB2F9 \\uAE30\\uB85D\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"})}):paginatedRecords.map(renderRow)})]})}),totalPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center items-center mt-4 space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(p=>Math.max(1,p-1)),disabled:currentPage===1,className:\"p-2 rounded-full disabled:opacity-50 hover:bg-gray-100\",children:/*#__PURE__*/_jsx(ChevronLeft,{})}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD398\\uC774\\uC9C0 \",currentPage,\" / \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(p=>Math.min(totalPages,p+1)),disabled:currentPage===totalPages,className:\"p-2 rounded-full disabled:opacity-50 hover:bg-gray-100\",children:/*#__PURE__*/_jsx(ChevronRight,{})})]})]});};if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-lg shadow-xl text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-red-600\",children:\"\\uC624\\uB958 \\uBC1C\\uC0DD!\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]})});if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-red-500\"})});return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100 font-sans p-4 sm:p-8 flex flex-col\",ref:topOfPageRef,children:[/*#__PURE__*/_jsxs(\"header\",{className:\"flex flex-nowrap items-center justify-between bg-white p-2 sm:p-4 rounded-2xl shadow-lg mb-6 sticky top-4 z-10\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-lg sm:text-xl font-bold text-gray-800 flex items-center whitespace-nowrap\",children:[/*#__PURE__*/_jsx(ClipboardList,{className:\"w-5 h-5 sm:w-6 sm:h-6 mr-2 text-red-500\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uBBF8\\uACC4\\uC57D \\uAD00\\uB9AC\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 flex-shrink-0\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{var _formRef$current;return(_formRef$current=formRef.current)===null||_formRef$current===void 0?void 0:_formRef$current.scrollIntoView({behavior:'smooth'});},className:\"flex items-center px-3 py-1 bg-red-500 text-white rounded-full text-xs sm:text-sm font-semibold hover:bg-red-600\",children:[/*#__PURE__*/_jsx(Edit,{className:\"w-4 h-4 mr-1\"}),\"\\uAE30\\uB85D\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-xs text-gray-500 bg-gray-100 px-3 py-1 rounded-full min-w-0\",children:[/*#__PURE__*/_jsx(UserRound,{className:\"w-4 h-4 mr-1 flex-shrink-0\"}),/*#__PURE__*/_jsx(\"span\",{className:\"truncate\",children:\"\\uB0B4\\uBD80 \\uC9C1\\uC6D0\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col gap-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-5 rounded-2xl shadow-lg col-span-1 sm:col-span-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm mb-1\",children:\"\\uC774\\uBC88 \\uB2EC \\uBBF8\\uACC4\\uC57D \\uAC74\\uC218 / \\uC9C0\\uB09C \\uB2EC \\uB300\\uBE44\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-red-500\",children:[dashboardData.totalRecordsCurrentMonth,\"\\uAC74\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-800 text-lg sm:text-2xl\",children:[/*#__PURE__*/_jsx(ArrowUp,{className:\"w-6 h-6 mr-1 \".concat(dashboardData.totalRecordsCurrentMonth>=dashboardData.totalRecordsLastMonth?'text-green-500':'text-red-500 rotate-180')}),/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:dashboardData.totalRecordsLastMonth>0?\"\".concat(((dashboardData.totalRecordsCurrentMonth-dashboardData.totalRecordsLastMonth)/dashboardData.totalRecordsLastMonth*100).toFixed(1),\"%\"):'N/A'})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4 text-gray-700\",children:\"\\uC6D4\\uBCC4 \\uBBF8\\uACC4\\uC57D \\uAC74\\uC218 \\uCD94\\uC774\"}),renderChart(dashboardData.monthlyData,MonthlyLineChart)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-2xl shadow-lg flex flex-col items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-full flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-700\",children:\"\\uC9C0\\uC810/\\uB2F4\\uB2F9\\uC790\\uBCC4 \\uD1B5\\uACC4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setStatsMonth(prev=>new Date(prev.getFullYear(),prev.getMonth()-1,1)),className:\"p-1 rounded-full hover:bg-gray-200\",children:/*#__PURE__*/_jsx(ChevronLeft,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-gray-600 text-sm\",children:statsMonth.toLocaleString('ko-KR',{year:'numeric',month:'long'})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setStatsMonth(prev=>new Date(prev.getFullYear(),prev.getMonth()+1,1)),className:\"p-1 rounded-full hover:bg-gray-200\",children:/*#__PURE__*/_jsx(ChevronRight,{className:\"w-5 h-5\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row w-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full sm:w-1/2\",children:renderChart(dashboardData.monthlyBranches,props=>/*#__PURE__*/_jsx(TopNChart,_objectSpread({},props)))}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full sm:w-1/2 relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 bottom-0 left-0 w-px bg-gray-300 hidden sm:block\"}),renderChart(dashboardData.monthlySalespersons,props=>/*#__PURE__*/_jsx(TopNChart,_objectSpread(_objectSpread({},props),{},{isSalespersonChart:true})))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-700\",children:\"\\uACE0\\uAC1D \\uCD9C\\uCC98\\uBCC4 \\uBE44\\uC911 (\\uC6D4\\uBCC4)\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openSettingsModal('sources','고객 출처',sources),className:\"p-1 text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(Settings,{className:\"w-5 h-5\"})})]}),renderChart(dashboardData.monthlySources,PieChart)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-700\",children:\"\\uBBF8\\uACC4\\uC57D \\uC0AC\\uC720\\uBCC4 \\uBE44\\uC911 (\\uC6D4\\uBCC4)\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openSettingsModal('reasons','미계약 사유',reasons),className:\"p-1 text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(Settings,{className:\"w-5 h-5\"})})]}),renderChart(dashboardData.monthlyReasons,TopNChartReasons)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-2xl shadow-lg sm:col-span-2\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4 text-gray-700\",children:\"\\uC9C0\\uC810\\uBCC4 \\uB178\\uC1FC (\\uC6D4\\uBCC4)\"}),renderChart(dashboardData.monthlyNoShowsByBranch,props=>/*#__PURE__*/_jsx(TopNChart,_objectSpread({},props)))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-2xl shadow-lg mb-6 flex flex-col sm:flex-row items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full sm:w-1/3\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uACE0\\uAC1D \\uB610\\uB294 \\uB2F4\\uB2F9\\uC790 \\uC774\\uB984...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-red-500 focus:border-red-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full sm:w-auto\",children:[/*#__PURE__*/_jsxs(\"select\",{value:sourceFilter,onChange:e=>setSourceFilter(e.target.value),className:\"w-full sm:w-40 appearance-none p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-red-500 focus:border-red-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"\\uBAA8\\uB4E0 \\uCD9C\\uCC98\"}),sources.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s,children:s},s))]}),/*#__PURE__*/_jsx(ChevronDown,{className:\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5 pointer-events-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full sm:w-auto\",children:[/*#__PURE__*/_jsxs(\"select\",{value:reasonFilter,onChange:e=>setReasonFilter(e.target.value),className:\"w-full sm:w-40 appearance-none p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-red-500 focus:border-red-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"\\uBAA8\\uB4E0 \\uC0AC\\uC720\"}),reasons.map(r=>/*#__PURE__*/_jsx(\"option\",{value:r,children:r==='노쇼'?'노쇼 (카운팅X)':r},r))]}),/*#__PURE__*/_jsx(ChevronDown,{className:\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5 pointer-events-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full sm:w-auto\",children:[/*#__PURE__*/_jsxs(\"select\",{value:sortBy,onChange:e=>setSortBy(e.target.value),className:\"w-full sm:w-48 appearance-none p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-red-500 focus:border-red-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"date-desc\",children:\"\\uAE30\\uB85D\\uC21C (\\uCD5C\\uC2E0 \\uC21C)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"date-asc\",children:\"\\uAE30\\uB85D\\uC21C (\\uC624\\uB798\\uB41C \\uC21C)\"})]}),/*#__PURE__*/_jsx(ChevronDown,{className:\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5 pointer-events-none\"})]})]}),/*#__PURE__*/_jsx(PaginatedTable,{title:\"\\uBBF8\\uACC4\\uC57D \\uAC74 \\uC0C1\\uC138 \\uAE30\\uB85D\",records:allUnclosedRecords,currentPage:unclosedPage,setCurrentPage:setUnclosedPage,columns:['리컨택 처리','지점','담당자','고객','사유','내용','액션'],renderRow:r=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleRecontact(r.id,r.recontacted),className:\"px-2 py-1 bg-gray-200 text-gray-700 text-xs rounded hover:bg-gray-300 font-semibold\",children:\"\\uC644\\uB8CC \\uCC98\\uB9AC\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4 text-sm\",children:r.branch}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4 text-sm\",children:r.salesperson}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4 text-sm\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>r.customerContact&&window.open(\"tel:\".concat(r.customerContact)),className:\"flex items-center hover:text-blue-600 \".concat(!r.customerContact&&'cursor-default'),disabled:!r.customerContact,children:[r.customerName,r.customerContact&&/*#__PURE__*/_jsx(Phone,{className:\"w-4 h-4 ml-1\"})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4 text-sm\",children:r.reason}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4 text-sm\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>openCommentModal(r),className:\"inline-flex items-center text-red-600 hover:text-red-900 font-semibold\",children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-4 h-4 mr-1\"}),\"\\uB0B4\\uC6A9 (\",getCommentCount(r),\")\"]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4 text-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>openRecontractModal(r),className:\"px-2 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600\",children:\"\\uACC4\\uC57D\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openConfirmDeleteModal(r.id),className:\"text-gray-400 hover:text-red-600\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-5 h-5\"})})]})})]},r.id)}),/*#__PURE__*/_jsx(PaginatedTable,{title:\"\\uB9AC\\uCEE8\\uD0DD \\uC644\\uB8CC \\uAC74\",records:recontactedOnlyRecords,currentPage:recontactedPage,setCurrentPage:setRecontactedPage,columns:['완료 취소','지점','담당자','고객','사유','내용','액션'],renderRow:r=>/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-orange-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleRecontact(r.id,r.recontacted),className:\"px-2 py-1 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600 font-semibold\",children:\"\\uCC98\\uB9AC \\uCDE8\\uC18C\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4 text-sm\",children:r.branch}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4 text-sm\",children:r.salesperson}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4 text-sm\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>r.customerContact&&window.open(\"tel:\".concat(r.customerContact)),className:\"flex items-center hover:text-blue-600 \".concat(!r.customerContact&&'cursor-default'),disabled:!r.customerContact,children:[r.customerName,r.customerContact&&/*#__PURE__*/_jsx(Phone,{className:\"w-4 h-4 ml-1\"})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4 text-sm\",children:r.reason}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4 text-sm\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>openCommentModal(r),className:\"inline-flex items-center text-red-600 hover:text-red-900 font-semibold\",children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-4 h-4 mr-1\"}),\"\\uB0B4\\uC6A9 (\",getCommentCount(r),\")\"]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4 text-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>openRecontractModal(r),className:\"px-2 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600\",children:\"\\uACC4\\uC57D\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openConfirmDeleteModal(r.id),className:\"text-gray-400 hover:text-red-600\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-5 h-5\"})})]})})]},r.id)}),/*#__PURE__*/_jsx(PaginatedTable,{title:\"\\uC7AC\\uACC4\\uC57D \\uC644\\uB8CC \\uAE30\\uB85D\",records:recontractedCompletedRecords,currentPage:recontractedCompletedPage,setCurrentPage:setRecontractedCompletedPage,columns:['지점','담당자 (재계약자)','고객','최초 사유','내용','액션'],renderRow:r=>{const{recontractor}=parseRecontractInfo(r);return/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-green-50 hover:bg-green-100\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4 text-sm\",children:r.branch}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-3 py-4 text-sm\",children:[r.salesperson,\" (\",recontractor,\")\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4 text-sm\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>r.customerContact&&window.open(\"tel:\".concat(r.customerContact)),className:\"flex items-center hover:text-blue-600 \".concat(!r.customerContact&&'cursor-default'),disabled:!r.customerContact,children:[r.customerName,r.customerContact&&/*#__PURE__*/_jsx(Phone,{className:\"w-4 h-4 ml-1\"})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4 text-sm\",children:r.reason}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4 text-sm\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>openCommentModal(r),className:\"inline-flex items-center text-blue-600 hover:text-blue-900 font-semibold\",children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-4 h-4 mr-1\"}),\"\\uB0B4\\uC6A9 (\",getCommentCount(r),\")\"]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4 text-sm\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>openRevertConfirmModal(r),className:\"px-2 py-1 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 flex items-center\",children:[/*#__PURE__*/_jsx(Undo2,{className:\"w-3 h-3 mr-1\"}),\"\\uBBF8\\uACC4\\uC57D\\uC73C\\uB85C\"]})})]},r.id);}}),/*#__PURE__*/_jsxs(\"div\",{ref:formRef,className:\"bg-gray-800 p-6 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6 text-white\",children:\"\\uC0C8 \\uBBF8\\uACC4\\uC57D \\uAC74 \\uAE30\\uB85D\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddRecord,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300\",children:\"\\uC9C0\\uC810\"}),/*#__PURE__*/_jsx(\"select\",{name:\"branch\",value:newRecordForm.branch,onChange:handleFormChange,className:\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\",children:branches.map(b=>/*#__PURE__*/_jsx(\"option\",{children:b},b))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300\",children:\"\\uB2F4\\uB2F9\\uC790\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"salesperson\",value:newRecordForm.salesperson,onFocus:handleInputFocus,onChange:handleFormChange,className:\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300\",children:\"\\uACE0\\uAC1D \\uC774\\uB984\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"customerName\",value:newRecordForm.customerName,onFocus:handleInputFocus,onChange:handleFormChange,className:\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300\",children:\"\\uACE0\\uAC1D \\uC5F0\\uB77D\\uCC98\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"customerContact\",value:newRecordForm.customerContact,onFocus:handleInputFocus,onChange:handleFormChange,className:\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300\",children:\"\\uACE0\\uAC1D \\uCD9C\\uCC98\"}),/*#__PURE__*/_jsx(\"select\",{name:\"source\",value:newRecordForm.source,onChange:handleFormChange,className:\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\",children:sources.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s,children:s},s))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300\",children:\"\\uBBF8\\uACC4\\uC57D \\uC0AC\\uC720\"}),/*#__PURE__*/_jsx(\"select\",{name:\"reason\",value:newRecordForm.reason,onChange:handleFormChange,className:\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\",children:reasons.map(r=>/*#__PURE__*/_jsx(\"option\",{value:r,children:r==='노쇼'?'노쇼 (카운팅X)':r},r))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300\",children:\"\\uC608\\uC57D \\uB0A0\\uC9DC\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"reservationDate\",value:newRecordForm.reservationDate,onChange:handleFormChange,className:\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300\",children:\"\\uC608\\uC57D \\uC2DC\\uAC04\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",name:\"reservationTime\",value:newRecordForm.reservationTime,onChange:handleFormChange,className:\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300\",children:\"\\uC0C1\\uB2F4 \\uC2DC\\uAC04\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"consultationTime\",value:newRecordForm.consultationTime,onFocus:handleInputFocus,onChange:handleFormChange,className:\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300\",children:\"\\uAE30\\uB85D \\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"recordContent\",value:newRecordForm.recordContent,onFocus:handleInputFocus,onChange:handleFormChange,onKeyDown:handleKeyDown,rows:\"3\",className:\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\",required:true})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"w-full flex justify-center items-center py-2 px-4 border rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-5 h-5 mr-2\"}),\"\\uAE30\\uB85D \\uCD94\\uAC00\"]})]})]})]})}),showSettingsModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white w-full max-w-md rounded-lg shadow-xl flex flex-col max-h-[90vh]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-4 border-b\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold\",children:[editingList.title,\" \\uBAA9\\uB85D \\uAD00\\uB9AC\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSettingsModal(false),children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6 text-gray-500 hover:text-gray-800\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newItemText,onChange:e=>setNewItemText(e.target.value),onKeyDown:e=>e.key==='Enter'&&handleAddItemToList(),placeholder:\"\\uC0C8 \\uD56D\\uBAA9 \\uCD94\\uAC00...\",className:\"flex-grow p-2 border border-gray-300 rounded-md\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddItemToList,className:\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\",children:\"\\uCD94\\uAC00\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:editingList.items.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-2 bg-gray-100 rounded-md\",children:[/*#__PURE__*/_jsx(\"span\",{children:item}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteItemFromList(item),children:/*#__PURE__*/_jsx(Trash2,{className:\"w-5 h-5 text-red-500 hover:text-red-700\"})})]},item))})]})]})}),showRevertConfirmModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-white w-full max-w-md rounded-lg shadow-xl text-center\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-12 h-12 text-yellow-500 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-4\",children:\"\\uBBF8\\uACC4\\uC57D\\uC73C\\uB85C \\uB418\\uB3CC\\uB9AC\\uAE30\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-6 text-gray-600\",children:\"\\uC774 \\uC791\\uC5C5\\uC744 \\uC218\\uD589\\uD558\\uBA74 \\uC7AC\\uACC4\\uC57D \\uACFC\\uC815 \\uAE30\\uB85D\\uACFC \\uBAA8\\uB4E0 \\uD6C4\\uC18D \\uCF54\\uBA58\\uD2B8\\uAC00 \\uC601\\uAD6C\\uC801\\uC73C\\uB85C \\uC0AD\\uC81C\\uB429\\uB2C8\\uB2E4. \\uC9C4\\uD589\\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowRevertConfirmModal(false),className:\"px-4 py-2 border border-gray-300 rounded-md\",children:\"\\uCDE8\\uC18C\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRevertToUnclosed,className:\"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600\",children:\"\\uD655\\uC778\"})]})]})}),showRecontractModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleConfirmRecontract,className:\"p-6 bg-white w-full max-w-lg rounded-lg shadow-xl\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-4\",children:\"\\uC7AC\\uACC4\\uC57D \\uAE30\\uB85D \\uC785\\uB825\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium\",children:\"\\uC7AC\\uACC4\\uC57D \\uB2F4\\uB2F9\\uC790\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"salesperson\",value:recontractForm.salesperson,onChange:handleRecontractFormChange,className:\"mt-1 block w-full p-2 border border-gray-300 rounded-md\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium\",children:\"\\uC7AC\\uACC4\\uC57D \\uACFC\\uC815 \\uAE30\\uB85D\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"content\",value:recontractForm.content,onChange:handleRecontractFormChange,rows:\"4\",className:\"mt-1 block w-full p-2 border border-gray-300 rounded-md\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-2 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowRecontractModal(false),className:\"px-4 py-2 border border-gray-300 rounded-md\",children:\"\\uCDE8\\uC18C\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-blue-600 text-white rounded-md\",children:\"\\uC800\\uC7A5 \\uBC0F \\uC644\\uB8CC\"})]})]})}),showCommentModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white w-full max-w-lg rounded-lg shadow-xl flex flex-col max-h-[90vh]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-4 border-b flex-shrink-0\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold\",children:\"\\uAE30\\uB85D \\uBC0F \\uCF54\\uBA58\\uD2B8\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCommentModal(false),className:\"text-2xl font-bold\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 overflow-y-auto\",children:[selectedRecord.status==='recontracted'&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowHistory(!showHistory),className:\"w-full flex justify-between items-center p-2 bg-gray-200 rounded-md text-sm font-semibold hover:bg-gray-300\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uBBF8\\uACC4\\uC57D \\uD788\\uC2A4\\uD1A0\\uB9AC \\uBCF4\\uAE30\"}),/*#__PURE__*/_jsx(History,{className:\"w-5 h-5 transition-transform \".concat(showHistory?'rotate-180':'')})]})}),(showHistory||selectedRecord.status!=='recontracted')&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg mb-4 text-sm break-words relative\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uC9C0\\uC810:\"}),\" \",selectedRecord.branch,\", \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\uCD5C\\uCD08 \\uB2F4\\uB2F9\\uC790:\"}),\" \",selectedRecord.salesperson]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uACE0\\uAC1D:\"}),\" \",selectedRecord.customerName,\" (\",selectedRecord.customerContact||'없음',\")\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uCD9C\\uCC98:\"}),\" \",selectedRecord.source,\", \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\uC0AC\\uC720:\"}),\" \",selectedRecord.reason]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uC608\\uC57D:\"}),\" \",selectedRecord.reservationDate||'',\" \",selectedRecord.reservationTime||'']}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 whitespace-pre-wrap\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uCD5C\\uCD08 \\uAE30\\uB85D:\"}),\" \",selectedRecord.recordContent]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between mt-2 text-gray-500 text-xs\",children:/*#__PURE__*/_jsx(\"span\",{children:(_selectedRecord$date=selectedRecord.date)===null||_selectedRecord$date===void 0?void 0:_selectedRecord$date.toDate().toLocaleString('ko-KR')})}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleCopyRecord,className:\"absolute bottom-2 right-2 text-sm text-blue-600 hover:text-blue-800 flex items-center\",children:[/*#__PURE__*/_jsx(Copy,{className:\"w-4 h-4 mr-1\"}),\"\\uBCF5\\uC0AC\"]})]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold text-gray-700 mb-2\",children:[\"\\uCF54\\uBA58\\uD2B8 (\",((_selectedRecord$comme=selectedRecord.comments)===null||_selectedRecord$comme===void 0?void 0:_selectedRecord$comme.filter(c=>typeof c==='object'?c.type==='original':!c.startsWith('[재계약 성공]')).length)||0,\"\\uAC1C)\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 max-h-48 overflow-y-auto space-y-3\",children:((_selectedRecord$comme2=selectedRecord.comments)===null||_selectedRecord$comme2===void 0?void 0:_selectedRecord$comme2.filter(c=>typeof c==='object'?c.type==='original':!c.startsWith('[재계약 성공]')).length)>0?selectedRecord.comments.filter(c=>typeof c==='object'?c.type==='original':!c.startsWith('[재계약 성공]')).map((c,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start p-3 rounded-lg text-sm whitespace-pre-wrap bg-gray-100\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"flex-grow\",children:typeof c==='object'?c.text:c}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteComment(i,'original'),className:\"ml-2 text-gray-400 hover:text-red-600\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]},i)):/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"\\uCF54\\uBA58\\uD2B8\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"})})]}),selectedRecord.status==='recontracted'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg mb-4 text-sm relative\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-blue-800 mb-2\",children:\"\\uC7AC\\uACC4\\uC57D \\uACFC\\uC815 \\uAE30\\uB85D\"}),/*#__PURE__*/_jsx(\"p\",{className:\"whitespace-pre-wrap\",children:parseRecontractInfo(selectedRecord).process}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleCopyRecord,className:\"absolute bottom-2 right-2 text-sm text-blue-600 hover:text-blue-800 flex items-center\",children:[/*#__PURE__*/_jsx(Copy,{className:\"w-4 h-4 mr-1\"}),\"\\uBCF5\\uC0AC\"]})]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold text-gray-700 mb-2\",children:[\"\\uD6C4\\uC18D \\uCF54\\uBA58\\uD2B8 (\",((_selectedRecord$comme3=selectedRecord.comments)===null||_selectedRecord$comme3===void 0?void 0:_selectedRecord$comme3.filter(c=>typeof c==='object'&&c.type==='follow-up').length)||0,\"\\uAC1C)\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 max-h-48 overflow-y-auto space-y-3\",children:((_selectedRecord$comme4=selectedRecord.comments)===null||_selectedRecord$comme4===void 0?void 0:_selectedRecord$comme4.filter(c=>typeof c==='object'&&c.type==='follow-up').length)>0?selectedRecord.comments.filter(c=>typeof c==='object'&&c.type==='follow-up').map((c,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start p-3 rounded-lg text-sm whitespace-pre-wrap bg-gray-100\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"flex-grow\",children:c.text}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteComment(i,'follow-up'),className:\"ml-2 text-gray-400 hover:text-red-600\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]},i)):/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"\\uCF54\\uBA58\\uD2B8\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-t border-gray-200 flex-shrink-0\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\uC0C8 \\uCF54\\uBA58\\uD2B8 \\uCD94\\uAC00\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newCommentText,onChange:e=>setNewCommentText(e.target.value),rows:\"2\",className:\"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleAddComment,className:\"mt-2 px-4 py-2 bg-red-600 text-white rounded-md text-sm hover:bg-red-700\",children:\"\\uCF54\\uBA58\\uD2B8 \\uCD94\\uAC00\"})})]})]})}),showConfirmDeleteModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 bg-white w-full max-w-sm rounded-lg shadow-xl text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-4\",children:\"\\uAE30\\uB85D \\uC0AD\\uC81C\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-6\",children:\"\\uC815\\uB9D0\\uB85C \\uC0AD\\uC81C\\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowConfirmDeleteModal(false),className:\"px-4 py-2 border border-gray-300 rounded-md\",children:\"\\uCDE8\\uC18C\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDeleteRecord,className:\"px-4 py-2 bg-red-600 text-white rounded-md\",children:\"\\uC0AD\\uC81C\"})]})]})})]});}// --- Login Component ---\nfunction LoginComponent(_ref15){let{onLogin}=_ref15;const[password,setPassword]=useState('');const[error,setError]=useState('');// ========================= 중요 =========================\n// 여기에 접속에 사용할 비밀번호를 입력하세요.\n// ========================================================\nconst CORRECT_PASSWORD=\"0077\";const handleLogin=e=>{e.preventDefault();if(password===CORRECT_PASSWORD){setError('');onLogin();}else{setError('비밀번호가 올바르지 않습니다.');}};return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen bg-gray-100\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:\"p-10 bg-white rounded-2xl shadow-xl text-center w-full max-w-sm\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-800 mb-2\",children:\"\\uBBF8\\uACC4\\uC57D \\uAC74 \\uAD00\\uB9AC \\uB300\\uC2DC\\uBCF4\\uB4DC\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"\\uC811\\uC18D\\uD558\\uB824\\uBA74 \\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Lock,{className:\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),className:\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-red-500 focus:border-red-500\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-2\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full mt-4 px-4 py-2 bg-red-600 text-white font-semibold rounded-lg shadow-md hover:bg-red-700 transition-colors\",children:\"\\uC811\\uC18D\\uD558\\uAE30\"})]})});}// --- App Wrapper ---\nexport default function App(){const[user,setUser]=useState(null);const[auth,setAuth]=useState(null);const[loading,setLoading]=useState(true);const[isPasswordAuthenticated,setIsPasswordAuthenticated]=useState(false);useEffect(()=>{const app=initializeApp(firebaseConfig);const authInstance=getAuth(app);setAuth(authInstance);const unsubscribe=onAuthStateChanged(authInstance,user=>{setUser(user);setLoading(false);});return()=>unsubscribe();},[]);const handlePasswordLogin=async()=>{if(auth&&!user){try{await signInAnonymously(auth);}catch(error){console.error(\"Anonymous sign-in failed\",error);}}setIsPasswordAuthenticated(true);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500\"})});}return isPasswordAuthenticated&&user?/*#__PURE__*/_jsx(Dashboard,{user:user}):/*#__PURE__*/_jsx(LoginComponent,{onLogin:handlePasswordLogin});}","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemo","initializeApp","getAuth","signInAnonymously","onAuthStateChanged","getFirestore","doc","collection","onSnapshot","addDoc","updateDoc","query","deleteDoc","setDoc","ClipboardList","UserRound","ArrowUp","MessageSquare","Plus","ChevronLeft","ChevronRight","Trash2","Copy","Phone","Undo2","History","AlertTriangle","Edit","Lock","Search","ChevronDown","Settings","X","jsx","_jsx","jsxs","_jsxs","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","Dashboard","_ref","_selectedRecord$date","_selectedRecord$comme","_selectedRecord$comme2","_selectedRecord$comme3","_selectedRecord$comme4","user","db","setDb","records","setRecords","loading","setLoading","error","setError","topOfPageRef","formRef","newRecordForm","setNewRecordForm","customerName","customerContact","salesperson","branch","source","reason","reservationDate","reservationTime","consultationTime","recordContent","showCommentModal","setShowCommentModal","selectedRecord","setSelectedRecord","newCommentText","setNewCommentText","showConfirmDeleteModal","setShowConfirmDeleteModal","deleteRecordId","setDeleteRecordId","showRecontractModal","setShowRecontractModal","recontractRecord","setRecontractRecord","recontractForm","setRecontractForm","content","showHistory","setShowHistory","showRevertConfirmModal","setShowRevertConfirmModal","recordToRevert","setRecordToRevert","unclosedPage","setUnclosedPage","recontactedPage","setRecontactedPage","recontractedCompletedPage","setRecontractedCompletedPage","recordsPerPage","statsMonth","setStatsMonth","Date","searchTerm","setSearchTerm","sortBy","setSortBy","reasonFilter","setReasonFilter","sourceFilter","setSourceFilter","showSettingsModal","setShowSettingsModal","editingList","setEditingList","name","title","items","newItemText","setNewItemText","sources","setSources","reasons","setReasons","branches","branchColors","reasonColors","app","firestoreDb","settingsCollectionPath","concat","unsubSources","exists","data","unsubReasons","fetchedReasons","includes","push","collectionPath","q","unsubscribe","snapshot","fetchedRecords","docs","map","_objectSpread","id","err","console","handleFormChange","e","prev","target","value","handleRecontractFormChange","handleAddRecord","preventDefault","_topOfPageRef$current","comments","date","status","recontacted","current","scrollIntoView","behavior","openSettingsModal","listName","handleUpdateList","updatedItems","docRef","handleAddItemToList","trim","handleDeleteItemFromList","itemToDelete","filter","item","openRevertConfirmModal","record","handleRevertToUnclosed","originalComments","c","type","openRecontractModal","handleConfirmRecontract","recontractNote","text","timestamp","updatedComments","handleAddComment","newCommentObject","handleDeleteComment","commentIndexToDelete","commentType","commentsOfType","startsWith","otherComments","updatedCommentsOfType","_","index","finalComments","handleDeleteRecord","toggleRecontact","recordId","currentStatus","openCommentModal","openConfirmDeleteModal","handleCopyRecord","copyText","process","parseRecontractInfo","textarea","document","createElement","body","appendChild","select","execCommand","alert","removeChild","_record$comments","_lines$","recontractComment","find","recontractor","lines","split","replace","slice","join","getCommentCount","length","filteredAndSortedRecords","processedRecords","r","_record$customerName","_record$salesperson","toLowerCase","sort","a","b","_a$date","_b$date","dateA","toDate","dateB","allUnclosedRecords","recontactedOnlyRecords","recontractedCompletedRecords","dashboardData","now","activeUnclosed","monthlyData","salespersonBranchMap","forEach","_r$date","_data$monthlyData$mKe","d","mKey","getFullYear","String","getMonth","padStart","total","statsMonthRecords","_r$date2","monthlySalespersons","monthlyBranches","monthlySources","monthlyReasons","monthlyNoShowsByBranch","currentMonthRecordsCount","_r$date3","lastMonthStart","lastMonthEnd","lastMonthRecordsCount","_r$date4","totalRecordsCurrentMonth","totalRecordsLastMonth","handleInputFocus","setTimeout","block","handleKeyDown","key","shiftKey","renderChart","ChartComponent","hasData","Object","keys","className","children","MonthlyLineChart","_ref2","sortedMonths","maxCount","Math","max","m","chartHeight","chartWidth","padding","points","month","x","y","viewBox","preserveAspectRatio","x1","y1","x2","y2","stroke","strokeWidth","fill","cx","cy","textAnchor","fontSize","fontWeight","substring","TopNChart","_ref3","_sortedData$","isSalespersonChart","sortedData","entries","_ref4","_ref5","_ref6","label","count","style","width","backgroundColor","PieChart","_ref7","values","reduce","s","_ref8","_ref9","colors","p","paths","_ref0","i","percent","a1","a2","cos","PI","sin","_ref1","l","toFixed","TopNChartReasons","_ref10","_sortedData$2","_ref11","_ref12","_ref13","PaginatedTable","_ref14","currentPage","setCurrentPage","columns","renderRow","totalPages","ceil","paginatedRecords","col","colSpan","onClick","disabled","min","ref","_formRef$current","toLocaleString","year","props","placeholder","onChange","window","open","onSubmit","onFocus","required","onKeyDown","rows","LoginComponent","_ref15","onLogin","password","setPassword","CORRECT_PASSWORD","handleLogin","App","setUser","auth","setAuth","isPasswordAuthenticated","setIsPasswordAuthenticated","authInstance","handlePasswordLogin"],"sources":["/Users/sun/Desktop/vscode-macR/robe-non1/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInAnonymously, onAuthStateChanged } from 'firebase/auth';\nimport { getFirestore, doc, collection, onSnapshot, addDoc, updateDoc, query, deleteDoc, setDoc } from 'firebase/firestore';\n\n// Lucide React for icons\nimport { ClipboardList, UserRound, ArrowUp, MessageSquare, Plus, ChevronLeft, ChevronRight, Trash2, Copy, Phone, Undo2, History, AlertTriangle, Edit, Lock, Search, ChevronDown, Settings, X } from 'lucide-react';\n\n// --- Firebase Configuration & Initialization ---\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDIC0be4A6AK3lDjH5ouh_oywGvTKRxMt4\",\n  authDomain: \"robe-non1.firebaseapp.com\",\n  projectId: \"robe-non1\",\n  storageBucket: \"robe-non1.firebasestorage.app\",\n  messagingSenderId: \"491977372291\",\n  appId: \"1:491977372291:web:8abd59846cc674689a61b6\"\n};\nconst appId = firebaseConfig.appId;\n\n\n// --- Main App Component ---\nfunction Dashboard({ user }) {\n  const [db, setDb] = useState(null);\n  const [records, setRecords] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const topOfPageRef = useRef(null);\n  const formRef = useRef(null);\n\n  const [newRecordForm, setNewRecordForm] = useState({\n    customerName: '', customerContact: '', salesperson: '', branch: '신사',\n    source: '워크인', reason: '가격 문제', reservationDate: '', reservationTime: '',\n    consultationTime: '', recordContent: ''\n  });\n\n  const [showCommentModal, setShowCommentModal] = useState(false);\n  const [selectedRecord, setSelectedRecord] = useState(null);\n  const [newCommentText, setNewCommentText] = useState('');\n  const [showConfirmDeleteModal, setShowConfirmDeleteModal] = useState(false);\n  const [deleteRecordId, setDeleteRecordId] = useState(null);\n  const [showRecontractModal, setShowRecontractModal] = useState(false);\n  const [recontractRecord, setRecontractRecord] = useState(null);\n  const [recontractForm, setRecontractForm] = useState({ salesperson: '', content: '' });\n  const [showHistory, setShowHistory] = useState(false);\n  const [showRevertConfirmModal, setShowRevertConfirmModal] = useState(false);\n  const [recordToRevert, setRecordToRevert] = useState(null);\n\n  const [unclosedPage, setUnclosedPage] = useState(1);\n  const [recontactedPage, setRecontactedPage] = useState(1);\n  const [recontractedCompletedPage, setRecontractedCompletedPage] = useState(1);\n  const recordsPerPage = 5;\n\n  const [statsMonth, setStatsMonth] = useState(new Date());\n  const [searchTerm, setSearchTerm] = useState('');\n  const [sortBy, setSortBy] = useState('date-desc');\n  const [reasonFilter, setReasonFilter] = useState('all');\n  const [sourceFilter, setSourceFilter] = useState('all');\n  \n  const [showSettingsModal, setShowSettingsModal] = useState(false);\n  const [editingList, setEditingList] = useState({ name: '', title: '', items: []});\n  const [newItemText, setNewItemText] = useState('');\n  \n  const [sources, setSources] = useState(['워크인', '박람회', '루어', '지인소개', '크라우드', '기타']);\n  const [reasons, setReasons] = useState(['가격 문제', '비교 방문', '고객 변심', '의견 불일치', '기타', '노쇼']);\n\n  const branches = ['신사', '광교', '구월', '노원', '대전', '부산', '성수', '수원', '압구정', '인천', '잠실'];\n  const branchColors = {\n    '신사': '#EF4444', '광교': '#F97316', '구월': '#F59E0B', '노원': '#10B981', '대전': '#6B7280', \n    '부산': '#3B82F6', '성수': '#A855F7', '수원': '#EC4899', '압구정': '#14B8A6', '인천': '#6366F1', \n    '잠실': '#84CC16', '기타': '#78716C',\n  };\n  const reasonColors = {\n    '가격 문제': '#EF4444', '비교 방문': '#F97316', '고객 변심': '#F59E0B', \n    '의견 불일치': '#6366F1', '기타': '#6B7280', '노쇼': '#A855F7',\n  };\n\n  useEffect(() => {\n    const app = initializeApp(firebaseConfig);\n    const firestoreDb = getFirestore(app);\n    setDb(firestoreDb);\n  }, []);\n\n  useEffect(() => {\n    if (!db) return;\n    const settingsCollectionPath = `artifacts/${appId}/public/data/dashboard_settings`;\n    \n    const unsubSources = onSnapshot(doc(db, settingsCollectionPath, 'sources'), (doc) => {\n        if (doc.exists() && doc.data().items) setSources(doc.data().items);\n    });\n    const unsubReasons = onSnapshot(doc(db, settingsCollectionPath, 'reasons'), (doc) => {\n        if (doc.exists() && doc.data().items) {\n            const fetchedReasons = doc.data().items;\n            if (!fetchedReasons.includes('노쇼')) {\n                fetchedReasons.push('노쇼');\n            }\n            setReasons(fetchedReasons);\n        }\n    });\n\n    return () => {\n        unsubSources();\n        unsubReasons();\n    };\n  }, [db]);\n\n\n  useEffect(() => {\n    if (!db || !user) return;\n    setLoading(true);\n    const collectionPath = `artifacts/${appId}/public/data/unclosed_records`;\n    const q = query(collection(db, collectionPath));\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const fetchedRecords = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      setRecords(fetchedRecords);\n      setLoading(false);\n    }, (err) => {\n      console.error(\"Data Fetch Error:\", err);\n      setError(\"데이터를 불러오는 데 실패했습니다.\");\n      setLoading(false);\n    });\n    return () => unsubscribe();\n  }, [db, user]);\n\n  const handleFormChange = (e) => setNewRecordForm(prev => ({ ...prev, [e.target.name]: e.target.value }));\n  const handleRecontractFormChange = (e) => setRecontractForm(prev => ({ ...prev, [e.target.name]: e.target.value }));\n\n  const handleAddRecord = async (e) => {\n    e.preventDefault();\n    if (!db || !newRecordForm.customerName || !newRecordForm.salesperson || !newRecordForm.recordContent) {\n      return setError(\"필수 항목을 모두 입력해주세요.\");\n    }\n    try {\n      await addDoc(collection(db, `artifacts/${appId}/public/data/unclosed_records`), {\n        ...newRecordForm, comments: [], date: new Date(), status: '미계약', recontacted: false\n      });\n      setNewRecordForm({ customerName: '', customerContact: '', salesperson: '', branch: '신사', source: sources[0] || '', reason: reasons[0] || '', reservationDate: '', reservationTime: '', consultationTime: '', recordContent: '' });\n      setError(null);\n      topOfPageRef.current?.scrollIntoView({ behavior: 'smooth' });\n    } catch (e) { setError(\"데이터 추가 중 오류가 발생했습니다.\"); }\n  };\n  \n  const openSettingsModal = (listName, title, items) => {\n    setEditingList({ name: listName, title: title, items: items });\n    setNewItemText('');\n    setShowSettingsModal(true);\n  };\n  \n  const handleUpdateList = async (listName, updatedItems) => {\n      if (!db) return;\n      const docRef = doc(db, `artifacts/${appId}/public/data/dashboard_settings`, listName);\n      try {\n          await setDoc(docRef, { items: updatedItems });\n      } catch (e) {\n          setError(`${editingList.title} 목록 업데이트 중 오류 발생`);\n      }\n  };\n\n  const handleAddItemToList = () => {\n      if (newItemText.trim() === '' || editingList.items.includes(newItemText.trim())) return;\n      const updatedItems = [...editingList.items, newItemText.trim()];\n      setEditingList(prev => ({...prev, items: updatedItems}));\n      handleUpdateList(editingList.name, updatedItems);\n      setNewItemText('');\n  };\n\n  const handleDeleteItemFromList = (itemToDelete) => {\n      if (itemToDelete === '노쇼') return; // Prevent deleting '노쇼'\n      const updatedItems = editingList.items.filter(item => item !== itemToDelete);\n      setEditingList(prev => ({...prev, items: updatedItems}));\n      handleUpdateList(editingList.name, updatedItems);\n  };\n\n  const openRevertConfirmModal = (record) => {\n    setRecordToRevert(record);\n    setShowRevertConfirmModal(true);\n  };\n \n  const handleRevertToUnclosed = async () => {\n    if (!db || !recordToRevert) return;\n    try {\n      const originalComments = recordToRevert.comments.filter(c => {\n        const type = typeof c === 'object' ? c.type : 'original';\n        return type === 'original';\n      });\n      await updateDoc(doc(db, `artifacts/${appId}/public/data/unclosed_records`, recordToRevert.id), {\n        status: '미계약',\n        comments: originalComments,\n      });\n      setShowRevertConfirmModal(false);\n      setRecordToRevert(null);\n    } catch(e) {\n      setError(\"미계약으로 되돌리는 중 오류가 발생했습니다.\");\n    }\n  };\n\n  const openRecontractModal = (record) => {\n    setRecontractRecord(record);\n    setRecontractForm({ salesperson: '', content: '' });\n    setShowRecontractModal(true);\n  };\n\n  const handleConfirmRecontract = async (e) => {\n    e.preventDefault();\n    if (!db || !recontractRecord || !recontractForm.salesperson || !recontractForm.content) {\n      return setError(\"재계약 담당자와 과정 기록을 모두 입력해주세요.\");\n    }\n    try {\n      const recontractNote = {\n        text: `[재계약 성공] 담당자: ${recontractForm.salesperson}\\n과정: ${recontractForm.content}`,\n        type: 'recontract-process',\n        timestamp: new Date()\n      };\n      const updatedComments = [...(recontractRecord.comments || []), recontractNote];\n      await updateDoc(doc(db, `artifacts/${appId}/public/data/unclosed_records`, recontractRecord.id), {\n        status: 'recontracted', comments: updatedComments,\n      });\n      setShowRecontractModal(false);\n      setRecontractRecord(null);\n      setError(null);\n    } catch (e) { setError(\"재계약 처리 중 오류가 발생했습니다.\"); }\n  };\n\n  const handleAddComment = async () => {\n    if (!db || !selectedRecord?.id || !newCommentText) return;\n    try {\n      const newCommentObject = {\n        text: newCommentText,\n        type: selectedRecord.status === 'recontracted' ? 'follow-up' : 'original',\n        timestamp: new Date()\n      };\n      const updatedComments = [...(selectedRecord.comments || []), newCommentObject];\n      await updateDoc(doc(db, `artifacts/${appId}/public/data/unclosed_records`, selectedRecord.id), { comments: updatedComments });\n      setNewCommentText('');\n      setSelectedRecord(prev => ({ ...prev, comments: updatedComments }));\n    } catch (e) { setError(\"코멘트 추가 중 오류가 발생했습니다.\"); }\n  };\n\n  const handleDeleteComment = async (commentIndexToDelete, commentType) => {\n    if (!db || !selectedRecord?.id) return;\n    try {\n        const commentsOfType = selectedRecord.comments.filter(c => (typeof c === 'object' ? c.type === commentType : (commentType === 'original' && !c.startsWith('[재계약 성공]'))));\n        const otherComments = selectedRecord.comments.filter(c => (typeof c === 'object' ? c.type !== commentType : (commentType === 'original' && c.startsWith('[재계약 성공]'))));\n        \n        const updatedCommentsOfType = commentsOfType.filter((_, index) => index !== commentIndexToDelete);\n        \n        const finalComments = [...otherComments, ...updatedCommentsOfType];\n        \n        await updateDoc(doc(db, `artifacts/${appId}/public/data/unclosed_records`, selectedRecord.id), { comments: finalComments });\n        setSelectedRecord(prev => ({ ...prev, comments: finalComments }));\n    } catch (e) {\n        setError(\"코멘트 삭제 중 오류가 발생했습니다.\");\n    }\n  };\n\n  const handleDeleteRecord = async () => {\n    if (!db || !deleteRecordId) return;\n    try {\n      await deleteDoc(doc(db, `artifacts/${appId}/public/data/unclosed_records`, deleteRecordId));\n      setDeleteRecordId(null);\n      setShowConfirmDeleteModal(false);\n    } catch (e) { setError(\"데이터 삭제 중 오류가 발생했습니다.\"); }\n  };\n\n  const toggleRecontact = async (recordId, currentStatus) => {\n    if (!db) return;\n    try {\n      await updateDoc(doc(db, `artifacts/${appId}/public/data/unclosed_records`, recordId), { recontacted: !currentStatus });\n    } catch (e) { setError(\"리컨택 상태 업데이트 중 오류가 발생했습니다.\"); }\n  };\n\n  const openCommentModal = (record) => { setShowHistory(false); setSelectedRecord(record); setShowCommentModal(true); };\n  const openConfirmDeleteModal = (recordId) => { setDeleteRecordId(recordId); setShowConfirmDeleteModal(true); };\n\n  const handleCopyRecord = () => {\n    if (!selectedRecord) return;\n    let copyText = `[기본 정보]\\n지점: ${selectedRecord.branch}\\n최초 담당자: ${selectedRecord.salesperson}\\n고객: ${selectedRecord.customerName} (${selectedRecord.customerContact || '없음'})\\n출처: ${selectedRecord.source}\\n최초 미계약 사유: ${selectedRecord.reason}`;\n    if (selectedRecord.status === 'recontracted') {\n        const { process } = parseRecontractInfo(selectedRecord);\n        if (process) copyText += `\\n\\n[재계약 과정 기록]\\n${process}`;\n    } else {\n        copyText += `\\n\\n[미계약 기록]\\n${selectedRecord.recordContent}`;\n    }\n    const textarea = document.createElement('textarea');\n    textarea.value = copyText;\n    document.body.appendChild(textarea);\n    textarea.select();\n    try {\n      document.execCommand('copy');\n      alert('기록 내용이 클립보드에 복사되었습니다.');\n    } catch (err) {\n      alert('복사에 실패했습니다.');\n    }\n    document.body.removeChild(textarea);\n  };\n\n  const parseRecontractInfo = (record) => {\n    const recontractComment = record.comments?.find(c => (typeof c === 'object' && c.type === 'recontract-process') || (typeof c === 'string' && c.startsWith('[재계약 성공]')));\n    if (!recontractComment) return { recontractor: 'N/A', process: '' };\n    const text = typeof recontractComment === 'string' ? recontractComment : recontractComment.text;\n    const lines = text.split('\\n');\n    const recontractor = lines[0]?.replace('[재계약 성공] 담당자: ', '').trim() || 'N/A';\n    const process = lines.slice(1).join('\\n').replace('과정: ', '').trim();\n    return { recontractor, process };\n  };\n\n  const getCommentCount = (record) => {\n    if (!record || !record.comments) return 0;\n    return record.comments.filter(c => (typeof c === 'object' ? c.type !== 'recontract-process' : !c.startsWith('[재계약 성공]'))).length;\n  }\n\n  const filteredAndSortedRecords = useMemo(() => {\n    let processedRecords = [...records];\n    \n    if (sourceFilter !== 'all') {\n        processedRecords = processedRecords.filter(r => r.source === sourceFilter);\n    }\n    if (reasonFilter !== 'all') {\n        processedRecords = processedRecords.filter(r => r.reason === reasonFilter);\n    }\n\n    if (searchTerm) {\n        processedRecords = processedRecords.filter(record =>\n            record.customerName?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            record.salesperson?.toLowerCase().includes(searchTerm.toLowerCase())\n        );\n    }\n\n    processedRecords.sort((a, b) => {\n        const dateA = a.date?.toDate() || 0;\n        const dateB = b.date?.toDate() || 0;\n        if (sortBy === 'date-asc') {\n            return dateA - dateB;\n        }\n        return dateB - dateA;\n    });\n\n    return processedRecords;\n  }, [records, searchTerm, sortBy, reasonFilter, sourceFilter]);\n\n  const allUnclosedRecords = filteredAndSortedRecords.filter(r => r.status !== 'recontracted' && !r.recontacted);\n  const recontactedOnlyRecords = filteredAndSortedRecords.filter(r => r.status !== 'recontracted' && r.recontacted);\n  const recontractedCompletedRecords = filteredAndSortedRecords.filter(r => r.status === 'recontracted');\n  \n  const dashboardData = useMemo(() => {\n    const now = new Date();\n    \n    const allUnclosedRecords = records.filter(r => r.status !== 'recontracted');\n    const activeUnclosed = allUnclosedRecords.filter(r => r.reason !== '노쇼');\n\n    const data = {\n        monthlyData: {},\n        salespersonBranchMap: {}\n    };\n\n    activeUnclosed.forEach(r => {\n        const d = r.date?.toDate();\n        if (!d) return;\n        const mKey = `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}`;\n        data.monthlyData[mKey] = { total: (data.monthlyData[mKey]?.total || 0) + 1 };\n        if(r.salesperson && r.branch) data.salespersonBranchMap[r.salesperson] = r.branch;\n    });\n\n    const statsMonthRecords = allUnclosedRecords.filter(r => {\n        const d = r.date?.toDate();\n        return d && d.getFullYear() === statsMonth.getFullYear() && d.getMonth() === statsMonth.getMonth();\n    });\n\n    const monthlySalespersons = {};\n    const monthlyBranches = {};\n    const monthlySources = {};\n    const monthlyReasons = {};\n    const monthlyNoShowsByBranch = {};\n\n    statsMonthRecords.forEach(r => {\n        if (r.reason !== '노쇼') {\n            monthlySalespersons[r.salesperson] = (monthlySalespersons[r.salesperson] || 0) + 1;\n            monthlyBranches[r.branch] = (monthlyBranches[r.branch] || 0) + 1;\n            monthlySources[r.source] = (monthlySources[r.source] || 0) + 1;\n            monthlyReasons[r.reason] = (monthlyReasons[r.reason] || 0) + 1;\n        }\n\n        if (r.reason === '노쇼') {\n            monthlyNoShowsByBranch[r.branch] = (monthlyNoShowsByBranch[r.branch] || 0) + 1;\n        }\n    });\n\n    const currentMonthRecordsCount = activeUnclosed.filter(r => {\n        const d = r.date?.toDate();\n        return d && d.getFullYear() === now.getFullYear() && d.getMonth() === now.getMonth();\n    }).length;\n    \n    const lastMonthStart = new Date(now.getFullYear(), now.getMonth() - 1, 1);\n    const lastMonthEnd = new Date(now.getFullYear(), now.getMonth(), 0, 23, 59, 59, 999);\n    const lastMonthRecordsCount = activeUnclosed.filter(r => {\n        const d = r.date?.toDate();\n        return d && d >= lastMonthStart && d <= lastMonthEnd;\n    }).length;\n\n    return {\n      ...data,\n      monthlySalespersons,\n      monthlyBranches,\n      monthlySources,\n      monthlyReasons,\n      monthlyNoShowsByBranch,\n      totalRecordsCurrentMonth: currentMonthRecordsCount,\n      totalRecordsLastMonth: lastMonthRecordsCount,\n    };\n  }, [records, statsMonth]);\n\n\n  const handleInputFocus = (e) => {\n    setTimeout(() => {\n        e.target.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    }, 300);\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n        e.preventDefault();\n        handleAddRecord(e);\n    }\n  };\n\n  const renderChart = (data, ChartComponent) => {\n    const hasData = Object.keys(data).length > 0;\n    return (\n        <div className=\"relative p-4\">\n            {hasData ? <ChartComponent data={data} /> : <p className=\"text-center text-gray-500 h-full flex items-center justify-center\">데이터가 없습니다.</p>}\n        </div>\n    );\n  };\n\n  const MonthlyLineChart = ({ data }) => {\n    const sortedMonths = Object.keys(data).sort().slice(-6);\n    if (sortedMonths.length === 0) return <div className=\"h-40 flex items-center justify-center text-gray-500\">데이터가 없습니다.</div>;\n\n    const maxCount = Math.max(...sortedMonths.map(m => data[m].total), 0);\n    const chartHeight = 160;\n    const chartWidth = 500;\n    const padding = 30;\n\n    const points = sortedMonths.map((month, index) => {\n        const x = (index / (sortedMonths.length > 1 ? sortedMonths.length - 1 : 1)) * (chartWidth - padding * 2) + padding;\n        const y = chartHeight - padding - ((data[month].total / (maxCount || 1)) * (chartHeight - padding * 2));\n        return `${x},${y}`;\n    }).join(' ');\n\n    return (\n        <div className=\"w-full h-40\">\n            <svg viewBox={`0 0 ${chartWidth} ${chartHeight}`} className=\"w-full h-full\" preserveAspectRatio=\"xMidYMid meet\">\n                <line x1={padding} y1={chartHeight - padding} x2={chartWidth - padding} y2={chartHeight - padding} stroke=\"#e5e7eb\" strokeWidth=\"1\"/>\n                <polyline fill=\"none\" stroke=\"#EF4444\" strokeWidth=\"2\" points={points} />\n                {sortedMonths.map((month, index) => {\n                    const x = (index / (sortedMonths.length > 1 ? sortedMonths.length - 1 : 1)) * (chartWidth - padding * 2) + padding;\n                    const y = chartHeight - padding - ((data[month].total / (maxCount || 1)) * (chartHeight - padding * 2));\n                    return (\n                        <g key={month}>\n                            <circle cx={x} cy={y} r=\"4\" fill=\"#EF4444\" stroke=\"white\" strokeWidth=\"2\" />\n                            <text x={x} y={y - 10} textAnchor=\"middle\" fontSize=\"12\" fill=\"#4b5563\" fontWeight=\"bold\">{data[month].total}</text>\n                            <text x={x} y={chartHeight - padding + 15} textAnchor=\"middle\" fontSize=\"12\" fill=\"#9ca3af\">{month.substring(5)}월</text>\n                        </g>\n                    );\n                })}\n            </svg>\n        </div>\n    );\n  };\n\n  const TopNChart = ({ data, isSalespersonChart = false }) => {\n    const sortedData = Object.entries(data).sort(([, a], [, b]) => b - a);\n    const maxCount = sortedData[0]?.[1] || 0;\n    if (sortedData.length === 0) return <div className=\"p-4 w-full text-center text-gray-500\">해당 월 데이터가 없습니다.</div>\n    return <div className=\"flex flex-col space-y-2 p-4 w-full\">{sortedData.map(([label, count]) => <div key={label} className=\"flex items-center space-x-2\"><span className=\"text-sm font-medium text-gray-600 w-24 truncate\">{label}</span><div className=\"w-full h-4 bg-gray-200 rounded-full\"><div className=\"h-full rounded-full\" style={{ width: `${(count / maxCount) * 100}%`, backgroundColor: isSalespersonChart ? branchColors[dashboardData.salespersonBranchMap[label]] : branchColors[label] }}></div></div><span className=\"text-sm\">{count}</span></div>)}</div>;\n  };\n\n  const PieChart = ({ data }) => {\n    const total = Object.values(data).reduce((s, c) => s + c, 0);\n    const sortedData = Object.entries(data).sort(([, a], [, b]) => b - a);\n    const colors = ['#EF4444', '#F97316', '#F59E0B', '#10B981', '#6B7280', '#06B6D4'];\n    let p = 0;\n    const paths = sortedData.map(([label, count], i) => {\n      const percent = (count / total) * 100;\n      const a1 = (p / 100) * 360; p += percent; const a2 = (p / 100) * 360;\n      const [x1, y1] = [18 + 15.9155 * Math.cos(Math.PI * (a1 - 90) / 180), 18 + 15.9155 * Math.sin(Math.PI * (a1 - 90) / 180)];\n      const [x2, y2] = [18 + 15.9155 * Math.cos(Math.PI * (a2 - 90) / 180), 18 + 15.9155 * Math.sin(Math.PI * (a2 - 90) / 180)];\n      return <path key={label} d={`M18,18 L${x1},${y1} A15.9155,15.9155 0 ${percent > 50 ? 1 : 0},1 ${x2},${y2} Z`} fill={colors[i % colors.length]} />;\n    });\n    return <div className=\"flex flex-col items-center\"><svg viewBox=\"0 0 36 36\" className=\"w-32 h-32 mb-4\">{paths}</svg><div className=\"flex flex-wrap justify-center gap-x-4 gap-y-2 text-xs\">{sortedData.map(([l, c], i) => <div key={l} className=\"flex items-center\"><span className=\"w-3 h-3 rounded-full mr-2\" style={{ backgroundColor: colors[i % colors.length] }}></span>{l} ({((c / total) * 100).toFixed(0)}%)</div>)}</div></div>;\n  };\n  const TopNChartReasons = ({ data }) => {\n    const sortedData = Object.entries(data).sort(([, a], [, b]) => b - a).slice(0, 5);\n    const maxCount = sortedData[0]?.[1] || 0;\n    return <div className=\"flex flex-col space-y-2 p-4\">{sortedData.map(([label, count]) => <div key={label} className=\"flex items-center space-x-2\"><span className=\"text-sm w-24 truncate\">{label}</span><div className=\"w-full h-4 bg-gray-200 rounded-full\"><div className=\"h-full\" style={{ width: `${(count / maxCount) * 100}%`, backgroundColor: reasonColors[label] }}></div></div><span>{count}</span></div>)}</div>;\n  };\n\n  const PaginatedTable = ({ title, records, currentPage, setCurrentPage, columns, renderRow }) => {\n    const totalPages = Math.ceil(records.length / recordsPerPage);\n    const paginatedRecords = records.slice((currentPage - 1) * recordsPerPage, currentPage * recordsPerPage);\n\n    return (\n        <div className=\"bg-white p-4 sm:p-6 rounded-2xl shadow-lg\">\n            <h2 className=\"text-xl font-semibold mb-4 text-gray-700\">{title}</h2>\n            <div className=\"overflow-x-auto\">\n                <table className=\"min-w-[700px] w-full divide-y divide-gray-200\">\n                    <thead className=\"bg-gray-50\">\n                        <tr>\n                            {columns.map((col) => <th key={col} className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap\">{col}</th>)}\n                        </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\n                        {records.length === 0 ? (\n                            <tr><td colSpan={columns.length} className=\"p-4 text-center text-gray-500\">해당 기록이 없습니다.</td></tr>\n                        ) : (\n                            paginatedRecords.map(renderRow)\n                        )}\n                    </tbody>\n                </table>\n            </div>\n            {totalPages > 1 && (\n                <div className=\"flex justify-center items-center mt-4 space-x-2\">\n                    <button onClick={() => setCurrentPage(p => Math.max(1, p - 1))} disabled={currentPage === 1} className=\"p-2 rounded-full disabled:opacity-50 hover:bg-gray-100\"><ChevronLeft/></button>\n                    <span>페이지 {currentPage} / {totalPages}</span>\n                    <button onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))} disabled={currentPage === totalPages} className=\"p-2 rounded-full disabled:opacity-50 hover:bg-gray-100\"><ChevronRight/></button>\n                </div>\n            )}\n        </div>\n    );\n  };\n\n  if (error) return <div className=\"flex items-center justify-center min-h-screen\"><div className=\"bg-white p-8 rounded-lg shadow-xl text-center\"><h2 className=\"text-2xl font-bold text-red-600\">오류 발생!</h2><p>{error}</p></div></div>;\n  if (loading) return <div className=\"flex items-center justify-center min-h-screen\"><div className=\"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-red-500\"></div></div>;\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 font-sans p-4 sm:p-8 flex flex-col\" ref={topOfPageRef}>\n      <header className=\"flex flex-nowrap items-center justify-between bg-white p-2 sm:p-4 rounded-2xl shadow-lg mb-6 sticky top-4 z-10\">\n        <h1 className=\"text-lg sm:text-xl font-bold text-gray-800 flex items-center whitespace-nowrap\">\n            <ClipboardList className=\"w-5 h-5 sm:w-6 sm:h-6 mr-2 text-red-500\"/>\n            <span>미계약 관리</span>\n        </h1>\n        <div className=\"flex items-center gap-2 flex-shrink-0\">\n          <button onClick={() => formRef.current?.scrollIntoView({ behavior: 'smooth' })} className=\"flex items-center px-3 py-1 bg-red-500 text-white rounded-full text-xs sm:text-sm font-semibold hover:bg-red-600\">\n            <Edit className=\"w-4 h-4 mr-1\"/>\n            기록\n          </button>\n          <div className=\"flex items-center text-xs text-gray-500 bg-gray-100 px-3 py-1 rounded-full min-w-0\">\n            <UserRound className=\"w-4 h-4 mr-1 flex-shrink-0\"/>\n            <span className=\"truncate\">내부 직원</span>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"flex flex-col gap-6\">\n        <div className=\"w-full space-y-6\">\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\n             <div className=\"bg-white p-5 rounded-2xl shadow-lg col-span-1 sm:col-span-2\"><p className=\"text-gray-500 text-sm mb-1\">이번 달 미계약 건수 / 지난 달 대비</p><div className=\"flex items-center gap-4\"><p className=\"text-3xl font-bold text-red-500\">{dashboardData.totalRecordsCurrentMonth}건</p><div className=\"flex items-center text-gray-800 text-lg sm:text-2xl\"><ArrowUp className={`w-6 h-6 mr-1 ${dashboardData.totalRecordsCurrentMonth >= dashboardData.totalRecordsLastMonth ? 'text-green-500' : 'text-red-500 rotate-180'}`} /><span className=\"font-bold\">{dashboardData.totalRecordsLastMonth > 0 ? `${(((dashboardData.totalRecordsCurrentMonth - dashboardData.totalRecordsLastMonth) / dashboardData.totalRecordsLastMonth) * 100).toFixed(1)}%` : 'N/A'}</span></div></div></div>\n          </div>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\n            <div className=\"bg-white p-6 rounded-2xl shadow-lg\">\n              <h2 className=\"text-xl font-semibold mb-4 text-gray-700\">월별 미계약 건수 추이</h2>\n              {renderChart(dashboardData.monthlyData, MonthlyLineChart)}\n            </div>\n            <div className=\"bg-white p-6 rounded-2xl shadow-lg flex flex-col items-center\">\n                <div className=\"w-full flex justify-between items-center mb-4\">\n                    <h2 className=\"text-xl font-semibold text-gray-700\">지점/담당자별 통계</h2>\n                    <div className=\"flex items-center gap-2\">\n                        <button onClick={() => setStatsMonth(prev => new Date(prev.getFullYear(), prev.getMonth() - 1, 1))} className=\"p-1 rounded-full hover:bg-gray-200\"><ChevronLeft className=\"w-5 h-5\"/></button>\n                        <span className=\"font-semibold text-gray-600 text-sm\">{statsMonth.toLocaleString('ko-KR', { year: 'numeric', month: 'long' })}</span>\n                        <button onClick={() => setStatsMonth(prev => new Date(prev.getFullYear(), prev.getMonth() + 1, 1))} className=\"p-1 rounded-full hover:bg-gray-200\"><ChevronRight className=\"w-5 h-5\"/></button>\n                    </div>\n                </div>\n                <div className=\"flex flex-col sm:flex-row w-full\">\n                  <div className=\"w-full sm:w-1/2\">{renderChart(dashboardData.monthlyBranches, (props) => <TopNChart {...props} />)}</div>\n                  <div className=\"w-full sm:w-1/2 relative\">\n                    <div className=\"absolute top-0 bottom-0 left-0 w-px bg-gray-300 hidden sm:block\"></div>\n                    {renderChart(dashboardData.monthlySalespersons, (props) => <TopNChart {...props} isSalespersonChart />)}\n                  </div>\n                </div>\n            </div>\n            <div className=\"bg-white p-6 rounded-2xl shadow-lg\">\n              <div className=\"flex justify-between items-center mb-4\">\n                  <h2 className=\"text-xl font-semibold text-gray-700\">고객 출처별 비중 (월별)</h2>\n                  <button onClick={() => openSettingsModal('sources', '고객 출처', sources)} className=\"p-1 text-gray-400 hover:text-gray-600\"><Settings className=\"w-5 h-5\"/></button>\n              </div>\n              {renderChart(dashboardData.monthlySources, PieChart)}\n            </div>\n            <div className=\"bg-white p-6 rounded-2xl shadow-lg\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h2 className=\"text-xl font-semibold text-gray-700\">미계약 사유별 비중 (월별)</h2>\n                <button onClick={() => openSettingsModal('reasons', '미계약 사유', reasons)} className=\"p-1 text-gray-400 hover:text-gray-600\"><Settings className=\"w-5 h-5\"/></button>\n              </div>\n              {renderChart(dashboardData.monthlyReasons, TopNChartReasons)}\n            </div>\n            <div className=\"bg-white p-6 rounded-2xl shadow-lg sm:col-span-2\">\n                <h2 className=\"text-xl font-semibold mb-4 text-gray-700\">지점별 노쇼 (월별)</h2>\n                {renderChart(dashboardData.monthlyNoShowsByBranch, (props) => <TopNChart {...props} />)}\n            </div>\n          </div>\n\n          <div className=\"bg-white p-4 rounded-2xl shadow-lg mb-6 flex flex-col sm:flex-row items-center gap-4\">\n              <div className=\"relative w-full sm:w-1/3\">\n                  <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5\" />\n                  <input\n                      type=\"text\"\n                      placeholder=\"고객 또는 담당자 이름...\"\n                      value={searchTerm}\n                      onChange={(e) => setSearchTerm(e.target.value)}\n                      className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-red-500 focus:border-red-500\"\n                  />\n              </div>\n              <div className=\"relative w-full sm:w-auto\">\n                  <select value={sourceFilter} onChange={(e) => setSourceFilter(e.target.value)} className=\"w-full sm:w-40 appearance-none p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-red-500 focus:border-red-500\">\n                      <option value=\"all\">모든 출처</option>\n                      {sources.map(s => <option key={s} value={s}>{s}</option>)}\n                  </select>\n                  <ChevronDown className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5 pointer-events-none\" />\n              </div>\n              <div className=\"relative w-full sm:w-auto\">\n                   <select value={reasonFilter} onChange={(e) => setReasonFilter(e.target.value)} className=\"w-full sm:w-40 appearance-none p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-red-500 focus:border-red-500\">\n                      <option value=\"all\">모든 사유</option>\n                      {reasons.map(r => <option key={r} value={r}>{r === '노쇼' ? '노쇼 (카운팅X)' : r}</option>)}\n                  </select>\n                  <ChevronDown className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5 pointer-events-none\" />\n              </div>\n              <div className=\"relative w-full sm:w-auto\">\n                  <select value={sortBy} onChange={(e) => setSortBy(e.target.value)} className=\"w-full sm:w-48 appearance-none p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-red-500 focus:border-red-500\">\n                      <option value=\"date-desc\">기록순 (최신 순)</option>\n                      <option value=\"date-asc\">기록순 (오래된 순)</option>\n                  </select>\n                  <ChevronDown className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5 pointer-events-none\" />\n              </div>\n          </div>\n\n          <PaginatedTable \n            title=\"미계약 건 상세 기록\" \n            records={allUnclosedRecords} \n            currentPage={unclosedPage} \n            setCurrentPage={setUnclosedPage} \n            columns={['리컨택 처리', '지점', '담당자', '고객', '사유', '내용', '액션']} \n            renderRow={r => (\n              <tr key={r.id}>\n                <td className=\"px-3 py-4\"><button onClick={() => toggleRecontact(r.id, r.recontacted)} className=\"px-2 py-1 bg-gray-200 text-gray-700 text-xs rounded hover:bg-gray-300 font-semibold\">완료 처리</button></td>\n                <td className=\"px-3 py-4 text-sm\">{r.branch}</td><td className=\"px-3 py-4 text-sm\">{r.salesperson}</td>\n                <td className=\"px-3 py-4 text-sm\"><button onClick={() => r.customerContact && window.open(`tel:${r.customerContact}`)} className={`flex items-center hover:text-blue-600 ${!r.customerContact && 'cursor-default'}`} disabled={!r.customerContact}>{r.customerName}{r.customerContact && <Phone className=\"w-4 h-4 ml-1\" />}</button></td>\n                <td className=\"px-3 py-4 text-sm\">{r.reason}</td>\n                <td className=\"px-3 py-4 text-sm\"><button onClick={() => openCommentModal(r)} className=\"inline-flex items-center text-red-600 hover:text-red-900 font-semibold\"><MessageSquare className=\"w-4 h-4 mr-1\"/>내용 ({getCommentCount(r)})</button></td>\n                <td className=\"px-3 py-4 text-sm\"><div className=\"flex items-center space-x-4\"><button onClick={() => openRecontractModal(r)} className=\"px-2 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600\">계약</button><button onClick={() => openConfirmDeleteModal(r.id)} className=\"text-gray-400 hover:text-red-600\"><Trash2 className=\"w-5 h-5\" /></button></div></td>\n              </tr>\n            )} \n          />\n          <PaginatedTable \n            title=\"리컨택 완료 건\" \n            records={recontactedOnlyRecords} \n            currentPage={recontactedPage} \n            setCurrentPage={setRecontactedPage} \n            columns={['완료 취소', '지점', '담당자', '고객', '사유', '내용', '액션']} \n            renderRow={r => (\n              <tr key={r.id} className=\"bg-orange-50\">\n                <td className=\"px-3 py-4\"><button onClick={() => toggleRecontact(r.id, r.recontacted)} className=\"px-2 py-1 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600 font-semibold\">처리 취소</button></td>\n                <td className=\"px-3 py-4 text-sm\">{r.branch}</td><td className=\"px-3 py-4 text-sm\">{r.salesperson}</td>\n                <td className=\"px-3 py-4 text-sm\"><button onClick={() => r.customerContact && window.open(`tel:${r.customerContact}`)} className={`flex items-center hover:text-blue-600 ${!r.customerContact && 'cursor-default'}`} disabled={!r.customerContact}>{r.customerName}{r.customerContact && <Phone className=\"w-4 h-4 ml-1\" />}</button></td>\n                <td className=\"px-3 py-4 text-sm\">{r.reason}</td>\n                <td className=\"px-3 py-4 text-sm\"><button onClick={() => openCommentModal(r)} className=\"inline-flex items-center text-red-600 hover:text-red-900 font-semibold\"><MessageSquare className=\"w-4 h-4 mr-1\"/>내용 ({getCommentCount(r)})</button></td>\n                <td className=\"px-3 py-4 text-sm\"><div className=\"flex items-center space-x-4\"><button onClick={() => openRecontractModal(r)} className=\"px-2 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600\">계약</button><button onClick={() => openConfirmDeleteModal(r.id)} className=\"text-gray-400 hover:text-red-600\"><Trash2 className=\"w-5 h-5\" /></button></div></td>\n              </tr>\n            )}\n          />\n          <PaginatedTable title=\"재계약 완료 기록\" records={recontractedCompletedRecords} currentPage={recontractedCompletedPage} setCurrentPage={setRecontractedCompletedPage} columns={['지점', '담당자 (재계약자)', '고객', '최초 사유', '내용', '액션']} renderRow={r => { const { recontractor } = parseRecontractInfo(r); return <tr key={r.id} className=\"bg-green-50 hover:bg-green-100\"><td className=\"px-3 py-4 text-sm\">{r.branch}</td><td className=\"px-3 py-4 text-sm\">{r.salesperson} ({recontractor})</td><td className=\"px-3 py-4 text-sm\"><button onClick={() => r.customerContact && window.open(`tel:${r.customerContact}`)} className={`flex items-center hover:text-blue-600 ${!r.customerContact && 'cursor-default'}`} disabled={!r.customerContact}>{r.customerName}{r.customerContact && <Phone className=\"w-4 h-4 ml-1\" />}</button></td><td className=\"px-3 py-4 text-sm\">{r.reason}</td><td className=\"px-3 py-4 text-sm\"><button onClick={() => openCommentModal(r)} className=\"inline-flex items-center text-blue-600 hover:text-blue-900 font-semibold\"><MessageSquare className=\"w-4 h-4 mr-1\"/>내용 ({getCommentCount(r)})</button></td><td className=\"px-3 py-4 text-sm\"><button onClick={() => openRevertConfirmModal(r)} className=\"px-2 py-1 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 flex items-center\"><Undo2 className=\"w-3 h-3 mr-1\"/>미계약으로</button></td></tr>}} />\n        \n          <div ref={formRef} className=\"bg-gray-800 p-6 rounded-2xl shadow-lg\">\n            <h2 className=\"text-2xl font-bold mb-6 text-white\">새 미계약 건 기록</h2>\n            <form onSubmit={handleAddRecord} className=\"space-y-4\">\n              <div><label className=\"block text-sm font-medium text-gray-300\">지점</label><select name=\"branch\" value={newRecordForm.branch} onChange={handleFormChange} className=\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\">{branches.map(b => <option key={b}>{b}</option>)}</select></div>\n              <div><label className=\"block text-sm font-medium text-gray-300\">담당자</label><input type=\"text\" name=\"salesperson\" value={newRecordForm.salesperson} onFocus={handleInputFocus} onChange={handleFormChange} className=\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\" required /></div>\n              <div><label className=\"block text-sm font-medium text-gray-300\">고객 이름</label><input type=\"text\" name=\"customerName\" value={newRecordForm.customerName} onFocus={handleInputFocus} onChange={handleFormChange} className=\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\" required /></div>\n              <div><label className=\"block text-sm font-medium text-gray-300\">고객 연락처</label><input type=\"tel\" name=\"customerContact\" value={newRecordForm.customerContact} onFocus={handleInputFocus} onChange={handleFormChange} className=\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\" /></div>\n              <div><label className=\"block text-sm font-medium text-gray-300\">고객 출처</label><select name=\"source\" value={newRecordForm.source} onChange={handleFormChange} className=\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\">{sources.map(s => <option key={s} value={s}>{s}</option>)}</select></div>\n              <div><label className=\"block text-sm font-medium text-gray-300\">미계약 사유</label><select name=\"reason\" value={newRecordForm.reason} onChange={handleFormChange} className=\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\">{reasons.map(r => <option key={r} value={r}>{r === '노쇼' ? '노쇼 (카운팅X)' : r}</option>)}</select></div>\n              <div><label className=\"block text-sm font-medium text-gray-300\">예약 날짜</label><input type=\"date\" name=\"reservationDate\" value={newRecordForm.reservationDate} onChange={handleFormChange} className=\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\" /></div>\n              <div><label className=\"block text-sm font-medium text-gray-300\">예약 시간</label><input type=\"time\" name=\"reservationTime\" value={newRecordForm.reservationTime} onChange={handleFormChange} className=\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\" /></div>\n              <div><label className=\"block text-sm font-medium text-gray-300\">상담 시간</label><input type=\"text\" name=\"consultationTime\" value={newRecordForm.consultationTime} onFocus={handleInputFocus} onChange={handleFormChange} className=\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\" /></div>\n              <div><label className=\"block text-sm font-medium text-gray-300\">기록 내용</label><textarea name=\"recordContent\" value={newRecordForm.recordContent} onFocus={handleInputFocus} onChange={handleFormChange} onKeyDown={handleKeyDown} rows=\"3\" className=\"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 text-white rounded-md focus:ring-red-500 focus:border-red-500\" required></textarea></div>\n              <button type=\"submit\" className=\"w-full flex justify-center items-center py-2 px-4 border rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700\"><Plus className=\"w-5 h-5 mr-2\" />기록 추가</button>\n            </form>\n          </div>\n        </div>\n      </div>\n\n      {showSettingsModal && (\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50 p-4\">\n            <div className=\"bg-white w-full max-w-md rounded-lg shadow-xl flex flex-col max-h-[90vh]\">\n                <div className=\"flex justify-between items-center p-4 border-b\">\n                    <h3 className=\"text-xl font-bold\">{editingList.title} 목록 관리</h3>\n                    <button onClick={() => setShowSettingsModal(false)}><X className=\"w-6 h-6 text-gray-500 hover:text-gray-800\" /></button>\n                </div>\n                <div className=\"p-4 overflow-y-auto\">\n                    <div className=\"flex gap-2 mb-4\">\n                        <input\n                            type=\"text\"\n                            value={newItemText}\n                            onChange={(e) => setNewItemText(e.target.value)}\n                            onKeyDown={(e) => e.key === 'Enter' && handleAddItemToList()}\n                            placeholder=\"새 항목 추가...\"\n                            className=\"flex-grow p-2 border border-gray-300 rounded-md\"\n                        />\n                        <button onClick={handleAddItemToList} className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\">추가</button>\n                    </div>\n                    <div className=\"space-y-2\">\n                        {editingList.items.map(item => (\n                            <div key={item} className=\"flex justify-between items-center p-2 bg-gray-100 rounded-md\">\n                                <span>{item}</span>\n                                <button onClick={() => handleDeleteItemFromList(item)}><Trash2 className=\"w-5 h-5 text-red-500 hover:text-red-700\" /></button>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            </div>\n        </div>\n      )}\n\n      {showRevertConfirmModal && <div className=\"fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50 p-4\"><div className=\"p-6 bg-white w-full max-w-md rounded-lg shadow-xl text-center\"><AlertTriangle className=\"w-12 h-12 text-yellow-500 mx-auto mb-4\" /><h3 className=\"text-xl font-bold mb-4\">미계약으로 되돌리기</h3><p className=\"mb-6 text-gray-600\">이 작업을 수행하면 재계약 과정 기록과 모든 후속 코멘트가 영구적으로 삭제됩니다. 진행하시겠습니까?</p><div className=\"flex justify-center gap-4\"><button onClick={() => setShowRevertConfirmModal(false)} className=\"px-4 py-2 border border-gray-300 rounded-md\">취소</button><button onClick={handleRevertToUnclosed} className=\"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600\">확인</button></div></div></div>}\n      {showRecontractModal && <div className=\"fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50 p-4\"><form onSubmit={handleConfirmRecontract} className=\"p-6 bg-white w-full max-w-lg rounded-lg shadow-xl\"><h3 className=\"text-xl font-bold mb-4\">재계약 기록 입력</h3><div className=\"space-y-4\"><div><label className=\"block text-sm font-medium\">재계약 담당자</label><input type=\"text\" name=\"salesperson\" value={recontractForm.salesperson} onChange={handleRecontractFormChange} className=\"mt-1 block w-full p-2 border border-gray-300 rounded-md\" required /></div><div><label className=\"block text-sm font-medium\">재계약 과정 기록</label><textarea name=\"content\" value={recontractForm.content} onChange={handleRecontractFormChange} rows=\"4\" className=\"mt-1 block w-full p-2 border border-gray-300 rounded-md\" required></textarea></div></div><div className=\"flex justify-end gap-2 mt-6\"><button type=\"button\" onClick={() => setShowRecontractModal(false)} className=\"px-4 py-2 border border-gray-300 rounded-md\">취소</button><button type=\"submit\" className=\"px-4 py-2 bg-blue-600 text-white rounded-md\">저장 및 완료</button></div></form></div>}\n      {showCommentModal && <div className=\"fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50 p-4\">\n        <div className=\"bg-white w-full max-w-lg rounded-lg shadow-xl flex flex-col max-h-[90vh]\">\n            <div className=\"flex justify-between items-center p-4 border-b flex-shrink-0\">\n                <h3 className=\"text-xl font-bold\">기록 및 코멘트</h3>\n                <button onClick={() => setShowCommentModal(false)} className=\"text-2xl font-bold\">&times;</button>\n            </div>\n            <div className=\"p-4 overflow-y-auto\">\n                {selectedRecord.status === 'recontracted' && <div className=\"mb-4\"><button onClick={() => setShowHistory(!showHistory)} className=\"w-full flex justify-between items-center p-2 bg-gray-200 rounded-md text-sm font-semibold hover:bg-gray-300\"><span>미계약 히스토리 보기</span><History className={`w-5 h-5 transition-transform ${showHistory ? 'rotate-180' : ''}`}/></button></div>}\n                {(showHistory || selectedRecord.status !== 'recontracted') && <div><div className=\"bg-gray-50 p-4 rounded-lg mb-4 text-sm break-words relative\"><p><strong>지점:</strong> {selectedRecord.branch}, <strong>최초 담당자:</strong> {selectedRecord.salesperson}</p><p><strong>고객:</strong> {selectedRecord.customerName} ({selectedRecord.customerContact || '없음'})</p><p><strong>출처:</strong> {selectedRecord.source}, <strong>사유:</strong> {selectedRecord.reason}</p><p><strong>예약:</strong> {selectedRecord.reservationDate || ''} {selectedRecord.reservationTime || ''}</p><p className=\"mt-2 whitespace-pre-wrap\"><strong>최초 기록:</strong> {selectedRecord.recordContent}</p><div className=\"flex justify-between mt-2 text-gray-500 text-xs\"><span>{selectedRecord.date?.toDate().toLocaleString('ko-KR')}</span></div><button onClick={handleCopyRecord} className=\"absolute bottom-2 right-2 text-sm text-blue-600 hover:text-blue-800 flex items-center\"><Copy className=\"w-4 h-4 mr-1\"/>복사</button></div><h4 className=\"font-semibold text-gray-700 mb-2\">코멘트 ({(selectedRecord.comments?.filter(c => (typeof c === 'object' ? c.type === 'original' : !c.startsWith('[재계약 성공]'))).length || 0)}개)</h4><div className=\"mb-4 max-h-48 overflow-y-auto space-y-3\">{selectedRecord.comments?.filter(c => (typeof c === 'object' ? c.type === 'original' : !c.startsWith('[재계약 성공]'))).length > 0 ? selectedRecord.comments.filter(c => (typeof c === 'object' ? c.type === 'original' : !c.startsWith('[재계약 성공]'))).map((c, i) => <div key={i} className=\"flex items-start p-3 rounded-lg text-sm whitespace-pre-wrap bg-gray-100\"><p className=\"flex-grow\">{typeof c === 'object' ? c.text : c}</p><button onClick={() => handleDeleteComment(i, 'original')} className=\"ml-2 text-gray-400 hover:text-red-600\"><Trash2 className=\"w-4 h-4\" /></button></div>) : <p className=\"text-sm text-gray-500\">코멘트가 없습니다.</p>}</div></div>}\n                \n                {selectedRecord.status === 'recontracted' && (\n                    <div>\n                        <div className=\"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg mb-4 text-sm relative\">\n                            <h4 className=\"font-bold text-blue-800 mb-2\">재계약 과정 기록</h4>\n                            <p className=\"whitespace-pre-wrap\">{parseRecontractInfo(selectedRecord).process}</p>\n                            <button onClick={handleCopyRecord} className=\"absolute bottom-2 right-2 text-sm text-blue-600 hover:text-blue-800 flex items-center\"><Copy className=\"w-4 h-4 mr-1\"/>복사</button>\n                        </div>\n                        <h4 className=\"font-semibold text-gray-700 mb-2\">후속 코멘트 ({(selectedRecord.comments?.filter(c => typeof c === 'object' && c.type === 'follow-up').length || 0)}개)</h4>\n                        <div className=\"mb-4 max-h-48 overflow-y-auto space-y-3\">{selectedRecord.comments?.filter(c => typeof c === 'object' && c.type === 'follow-up').length > 0 ? selectedRecord.comments.filter(c => typeof c === 'object' && c.type === 'follow-up').map((c, i) => <div key={i} className=\"flex items-start p-3 rounded-lg text-sm whitespace-pre-wrap bg-gray-100\"><p className=\"flex-grow\">{c.text}</p><button onClick={() => handleDeleteComment(i, 'follow-up')} className=\"ml-2 text-gray-400 hover:text-red-600\"><Trash2 className=\"w-4 h-4\" /></button></div>) : <p className=\"text-sm text-gray-500\">코멘트가 없습니다.</p>}</div>\n                    </div>\n                )}\n            </div>\n            <div className=\"p-4 border-t border-gray-200 flex-shrink-0\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">새 코멘트 추가</label>\n                <textarea value={newCommentText} onChange={(e) => setNewCommentText(e.target.value)} rows=\"2\" className=\"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500\"></textarea>\n                <div className=\"flex justify-end\">\n                    <button onClick={handleAddComment} className=\"mt-2 px-4 py-2 bg-red-600 text-white rounded-md text-sm hover:bg-red-700\">코멘트 추가</button>\n                </div>\n            </div>\n        </div>\n      </div>}\n      {showConfirmDeleteModal && <div className=\"fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50\"><div className=\"p-8 bg-white w-full max-w-sm rounded-lg shadow-xl text-center\"><h3 className=\"text-xl font-bold mb-4\">기록 삭제</h3><p className=\"mb-6\">정말로 삭제하시겠습니까?</p><div className=\"flex justify-center gap-4\"><button onClick={() => setShowConfirmDeleteModal(false)} className=\"px-4 py-2 border border-gray-300 rounded-md\">취소</button><button onClick={handleDeleteRecord} className=\"px-4 py-2 bg-red-600 text-white rounded-md\">삭제</button></div></div></div>}\n    </div>\n  );\n}\n\n// --- Login Component ---\nfunction LoginComponent({ onLogin }) {\n    const [password, setPassword] = useState('');\n    const [error, setError] = useState('');\n    \n    // ========================= 중요 =========================\n    // 여기에 접속에 사용할 비밀번호를 입력하세요.\n    // ========================================================\n    const CORRECT_PASSWORD = \"0077\";\n\n    const handleLogin = (e) => {\n        e.preventDefault();\n        if (password === CORRECT_PASSWORD) {\n            setError('');\n            onLogin();\n        } else {\n            setError('비밀번호가 올바르지 않습니다.');\n        }\n    };\n\n    return (\n        <div className=\"flex items-center justify-center min-h-screen bg-gray-100\">\n            <form onSubmit={handleLogin} className=\"p-10 bg-white rounded-2xl shadow-xl text-center w-full max-w-sm\">\n                <h1 className=\"text-2xl font-bold text-gray-800 mb-2\">미계약 건 관리 대시보드</h1>\n                <p className=\"text-gray-600 mb-6\">접속하려면 비밀번호를 입력하세요.</p>\n                <div className=\"relative\">\n                    <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5\" />\n                    <input\n                        type=\"password\"\n                        value={password}\n                        onChange={(e) => setPassword(e.target.value)}\n                        className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-red-500 focus:border-red-500\"\n                        placeholder=\"비밀번호\"\n                    />\n                </div>\n                {error && <p className=\"text-red-500 text-sm mt-2\">{error}</p>}\n                <button\n                    type=\"submit\"\n                    className=\"w-full mt-4 px-4 py-2 bg-red-600 text-white font-semibold rounded-lg shadow-md hover:bg-red-700 transition-colors\"\n                >\n                    접속하기\n                </button>\n            </form>\n        </div>\n    );\n}\n\n// --- App Wrapper ---\nexport default function App() {\n    const [user, setUser] = useState(null);\n    const [auth, setAuth] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [isPasswordAuthenticated, setIsPasswordAuthenticated] = useState(false);\n\n    useEffect(() => {\n        const app = initializeApp(firebaseConfig);\n        const authInstance = getAuth(app);\n        setAuth(authInstance);\n\n        const unsubscribe = onAuthStateChanged(authInstance, (user) => {\n            setUser(user);\n            setLoading(false);\n        });\n\n        return () => unsubscribe();\n    }, []);\n\n    const handlePasswordLogin = async () => {\n        if (auth && !user) {\n            try {\n                await signInAnonymously(auth);\n            } catch (error) {\n                console.error(\"Anonymous sign-in failed\", error);\n            }\n        }\n        setIsPasswordAuthenticated(true);\n    };\n\n    if (loading) {\n        return <div className=\"flex items-center justify-center min-h-screen\"><div className=\"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500\"></div></div>;\n    }\n\n    return isPasswordAuthenticated && user ? <Dashboard user={user} /> : <LoginComponent onLogin={handlePasswordLogin} />;\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}